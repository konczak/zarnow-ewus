<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="ServiceBrokerCwuAuth5.7.2" soapui-version="5.5.0" resourceRoot="${projectDir}" abortOnError="false" runType="SEQUENTIAL"
                    activeEnvironment="Default" id="d5965719-eac6-451a-94a6-c74aefb710f5" xmlns:con="http://eviware.com/soapui/config">
    <con:settings>
        <con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="TestSuite" value="TestSuite OW01 SWD MFA"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="TestCase" value="TestCase (osoba z uprawnieniem)"/>
  <con:entry key="Username" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Save Project" value="false"/>
</xml-fragment>]]></con:setting>
    </con:settings>
    <con:interface name="ServiceBrokerSoapBinding" bindingName="{http://xml.kamsoft.pl/ws/broker}ServiceBrokerSoapBinding" soapVersion="1_1"
                   definition="https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker?wsdl" xsi:type="con:WsdlInterface"
                   wsaVersion="NONE" anonymous="optional" id="c0f14cf6-ae76-4a2a-8679-23ef2d67d66f" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <con:settings/>
        <con:definitionCache type="TEXT" rootPart="https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker?wsdl">
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker?wsdl</con:url>
                <con:content><![CDATA[<wsdl:definitions targetNamespace="http://xml.kamsoft.pl/ws/broker" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns="http://wsdl.kamsoft.pl/common" xmlns:wsbroker="http://xml.kamsoft.pl/ws/broker" xmlns:ns1="http://www.w3.org/2005/05/xmlmime" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wscommon="http://xml.kamsoft.pl/ws/common" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/">
  <wsdl:documentation>ServiceBroker</wsdl:documentation>
  <wsdl:types>
    <schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xml.kamsoft.pl/ws/broker" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
      <import namespace="http://www.w3.org/2005/05/xmlmime" schemaLocation="ServiceBroker?xsd=xmime.xsd"/>
      <import namespace="http://xml.kamsoft.pl/ws/common" schemaLocation="ServiceBroker?xsd=ws-common.xsd"/>
      <complexType name="ServiceResponse">
        <complexContent>
          <extension base="wsbroker:Service"/>
        </complexContent>
      </complexType>
      <complexType name="ServiceRequest">
        <complexContent>
          <extension base="wsbroker:Service"/>
        </complexContent>
      </complexType>
      <complexType name="Service">
        <sequence>
          <element ref="wscommon:location"/>
          <element name="date" type="dateTime"/>
          <element minOccurs="0" name="params" type="wsbroker:ArrayOfParam"/>
          <element name="payload" type="wsbroker:Payload"/>
        </sequence>
      </complexType>
      <complexType name="Payload">
        <sequence>
          <element minOccurs="0" name="textload">
            <complexType>
              <sequence>
                <any/>
              </sequence>
            </complexType>
          </element>
          <element minOccurs="0" name="streamload">
            <complexType>
              <sequence>
                <element name="stream" type="xmime:base64Binary"/>
              </sequence>
              <attribute name="name" type="string" use="required"/>
            </complexType>
          </element>
        </sequence>
      </complexType>
      <complexType name="Param">
        <sequence>
          <element name="name" type="string"/>
          <element name="value" type="string"/>
        </sequence>
      </complexType>
      <complexType name="ArrayOfParam">
        <sequence>
          <element maxOccurs="unbounded" name="item" type="wsbroker:Param"/>
        </sequence>
      </complexType>
      <element name="executeService" type="wsbroker:ServiceRequest"/>
      <element name="executeServiceReturn" type="wsbroker:ServiceResponse"/>
    </schema>
    <schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://wsdl.kamsoft.pl/common" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://schemas.xmlsoap.org/soap/encoding/">
      <import namespace="http://xml.kamsoft.pl/ws/common" schemaLocation="ServiceBroker?xsd=ws-common.xsd"/>
    </schema>
  </wsdl:types>
  <wsdl:message name="executeServiceRequestMsg">
    <wsdl:part name="request" element="wsbroker:executeService"/>
  </wsdl:message>
  <wsdl:message name="executeServiceRequestMsg">
    <wsdl:part name="session" element="wscommon:session"/>
  </wsdl:message>
  <wsdl:message name="executeServiceRequestMsg">
    <wsdl:part name="token" element="wscommon:authToken"/>
  </wsdl:message>
  <wsdl:message name="executeServiceResponseMsg">
    <wsdl:part name="response" element="wsbroker:executeServiceReturn"/>
  </wsdl:message>
  <wsdl:message name="serviceExceptionMsg">
    <wsdl:part name="fault" element="wscommon:serviceError"/>
  </wsdl:message>
  <wsdl:message name="sessionExceptionMsg">
    <wsdl:part name="fault" element="wscommon:sessionError"/>
  </wsdl:message>
  <wsdl:message name="authTokenExceptionMsg">
    <wsdl:part name="fault" element="wscommon:authTokenError"/>
  </wsdl:message>
  <wsdl:message name="inputExceptionMsg">
    <wsdl:part name="fault" element="wscommon:inputError"/>
  </wsdl:message>
  <wsdl:message name="authenticationExceptionMsg">
    <wsdl:part name="fault" element="wscommon:authenticationError"/>
  </wsdl:message>
  <wsdl:message name="serverExceptionMsg">
    <wsdl:part name="fault" element="wscommon:serverError"/>
  </wsdl:message>
  <wsdl:message name="authorizationExceptionMsg">
    <wsdl:part name="fault" element="wscommon:authorizationError"/>
  </wsdl:message>
  <wsdl:portType name="ServiceBrokerPortType">
    <wsdl:operation name="executeService">
      <wsdl:input message="wsbroker:executeServiceRequestMsg" wsaw:Action="executeService"/>
      <wsdl:output message="wsbroker:executeServiceResponseMsg" wsaw:Action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceResponse"/>
      <wsdl:fault message="wsbroker:serviceExceptionMsg" name="serviceExceptionMsg" wsaw:Action="urn:executeServiceserviceExceptionMsg"/>
      <wsdl:fault message="wsbroker:sessionExceptionMsg" name="sessionExceptionMsg" wsaw:Action="urn:executeServicesessionExceptionMsg"/>
      <wsdl:fault message="wsbroker:authTokenExceptionMsg" name="authTokenExceptionMsg" wsaw:Action="urn:executeServiceauthTokenExceptionMsg"/>
      <wsdl:fault message="wsbroker:inputExceptionMsg" name="inputExceptionMsg" wsaw:Action="urn:executeServiceinputExceptionMsg"/>
      <wsdl:fault message="wsbroker:authenticationExceptionMsg" name="authenticationExceptionMsg" wsaw:Action="urn:executeServiceauthenticationExceptionMsg"/>
      <wsdl:fault message="wsbroker:serverExceptionMsg" name="serverExceptionMsg" wsaw:Action="urn:executeServiceserverExceptionMsg"/>
      <wsdl:fault message="wsbroker:authorizationExceptionMsg" name="authorizationExceptionMsg" wsaw:Action="urn:executeServiceauthorizationExceptionMsg"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="ServiceBrokerSoapBinding" type="wsbroker:ServiceBrokerPortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <wsdl:operation name="executeService">
      <soap:operation soapAction="executeService" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
        <soap12:header use="literal" part="session" message="wsbroker:executeServiceRequestMsg"/>
        <soap12:header use="literal" part="token" message="wsbroker:executeServiceRequestMsg"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="sessionExceptionMsg">
        <soap:fault use="literal" name="sessionExceptionMsg"/>
      </wsdl:fault>
      <wsdl:fault name="serviceExceptionMsg">
        <soap:fault use="literal" name="serviceExceptionMsg"/>
      </wsdl:fault>
      <wsdl:fault name="authTokenExceptionMsg">
        <soap:fault use="literal" name="authTokenExceptionMsg"/>
      </wsdl:fault>
      <wsdl:fault name="authorizationExceptionMsg">
        <soap:fault use="literal" name="authorizationExceptionMsg"/>
      </wsdl:fault>
      <wsdl:fault name="inputExceptionMsg">
        <soap:fault use="literal" name="inputExceptionMsg"/>
      </wsdl:fault>
      <wsdl:fault name="serverExceptionMsg">
        <soap:fault use="literal" name="serverExceptionMsg"/>
      </wsdl:fault>
      <wsdl:fault name="authenticationExceptionMsg">
        <soap:fault use="literal" name="authenticationExceptionMsg"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="ServiceBroker">
    <wsdl:port name="ServiceBroker" binding="wsbroker:ServiceBrokerSoapBinding">
      <soap:address location="https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content>
                <con:type>http://schemas.xmlsoap.org/wsdl/</con:type>
            </con:part>
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker?xsd=xmime.xsd</con:url>
                <con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://www.w3.org/2005/05/xmlmime" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
  <xs:attribute name="contentType">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:minLength value="3"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>
  <xs:attribute name="expectedContentTypes" type="xs:string"/>
  <xs:complexType name="base64Binary">
    <xs:simpleContent>
      <xs:extension base="xs:base64Binary">
        <xs:attribute ref="xmime:contentType"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="hexBinary">
    <xs:simpleContent>
      <xs:extension base="xs:hexBinary">
        <xs:attribute ref="xmime:contentType"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>]]></con:content>
                <con:type>http://www.w3.org/2001/XMLSchema</con:type>
            </con:part>
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker?xsd=ws-common.xsd</con:url>
                <con:content><![CDATA[<schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xml.kamsoft.pl/ws/common" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:wscommon="http://xml.kamsoft.pl/ws/common" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <complexType name="AuthorizationException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="AuthenticationException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="ServiceException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="PassExpiredException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="AuthTokenException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="ServerException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="InputException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="SessionException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="ArrayOfMessage">
    <sequence>
      <element maxOccurs="unbounded" name="Message" type="string"/>
    </sequence>
  </complexType>
  <complexType name="BaseException">
    <sequence>
      <element ref="wscommon:location"/>
      <element name="faultcode" type="string"/>
      <element name="faultstring" type="string"/>
      <element name="faultactor" type="string"/>
      <element minOccurs="0" name="messages" type="wscommon:ArrayOfMessage"/>
    </sequence>
  </complexType>
  <complexType name="ServiceLocation">
    <sequence>
      <element name="namespace" type="string"/>
      <element name="localname" type="string"/>
      <element name="version" type="string"/>
      <element default="0" minOccurs="0" name="id" type="string"/>
    </sequence>
  </complexType>
  <element name="sessionError" type="wscommon:SessionException"/>
  <element name="passExpiredError" type="wscommon:PassExpiredException"/>
  <element name="authTokenError" type="wscommon:AuthTokenException"/>
  <element name="authenticationError" type="wscommon:AuthenticationException"/>
  <element name="authorizationError" type="wscommon:AuthorizationException"/>
  <element name="inputError" type="wscommon:InputException"/>
  <element name="serviceError" type="wscommon:ServiceException"/>
  <element name="serverError" type="wscommon:ServerException"/>
  <element name="location" type="wscommon:ServiceLocation"/>
  <element name="authToken">
    <complexType>
      <attribute name="id" type="string" use="required"/>
    </complexType>
  </element>
  <element name="session">
    <complexType>
      <attribute name="id" type="string" use="required"/>
    </complexType>
  </element>
</schema>]]></con:content>
                <con:type>http://www.w3.org/2001/XMLSchema</con:type>
            </con:part>
        </con:definitionCache>
        <con:endpoints>


            <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
        </con:endpoints>
        <con:operation isOneWay="false" action="executeService" name="executeService" bindingOperationName="executeService" inputName=""
                       receivesAttachments="false" sendsAttachments="false" type="Request-Response" anonymous="optional"
                       id="483659a2-e6b6-4bfc-8641-f899f6965754">
            <con:settings/>
            <con:call name="checkCWU" id="af6b62a2-70d3-4900-85dc-26238761ca95">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
   <!--Uwaga - Wymagana zmiana poniższych wartości na poprawne identyfikatory sesji i tokenu, uzyskane jako wynik poprawnej operacji logowania -->
    <ns1:session id="235895D9C5DDE5B8B6AE0D3406E76F2D" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <ns1:authToken id="BSgSQLf3vqL+4vhAY0lGGI" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>


   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
		<brok:textload>
			<ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
		</brok:textload>
        </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
            <con:call id="9fa6b8b7-ebd4-449b-b1b4-aef727616eda" name="checkCWULimitTempLocked">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
   <!--Uwaga - Wymagana zmiana poniższych wartości na poprawne identyfikatory sesji i tokenu, uzyskane jako wynik poprawnej operacji logowania -->
<ns1:session id="235895D9C5DDE5B8B6AE0D3406E76F2D" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <ns1:authToken id="BSgSQLf3vqL+4vhAY0lGGI" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>

   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
		<brok:textload>
			<ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199983</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
		</brok:textload>
        </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="executeService"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
            <con:call id="65fb4565-3d3f-4cc4-8538-eb375148860f" name="checkCWULimitCount">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
   <!--Uwaga - Wymagana zmiana poniższych wartości na poprawne identyfikatory sesji i tokenu, uzyskane jako wynik poprawnej operacji logowania -->
<ns1:session id="235895D9C5DDE5B8B6AE0D3406E76F2D" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <ns1:authToken id="BSgSQLf3vqL+4vhAY0lGGI" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>


   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
		<brok:textload>
			<ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
		</brok:textload>
        </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="executeService"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
            <con:call id="7d8f23b2-cea5-4bda-881e-0eec236af378" name="checkCWULimitAdmin">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
   <!--Uwaga - Wymagana zmiana poniższych wartości na poprawne identyfikatory sesji i tokenu, uzyskane jako wynik poprawnej operacji logowania -->
<ns1:session id="235895D9C5DDE5B8B6AE0D3406E76F2D" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <ns1:authToken id="BSgSQLf3vqL+4vhAY0lGGI" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>


   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
		<brok:textload>
			<ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
		</brok:textload>
        </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="executeService"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
        </con:operation>

    </con:interface>
    <con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AuthSoapBinding" type="wsdl"
                   bindingName="{http://xml.kamsoft.pl/ws/auth}AuthSoapBinding" soapVersion="1_1" anonymous="optional"
                   definition="https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth?wsdl" id="930b49c9-249f-4f04-93e5-224221a568aa"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <con:settings/>

        <con:definitionCache type="TEXT" rootPart="https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth?wsdl">
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth?wsdl</con:url>
                <con:content><![CDATA[<wsdl:definitions targetNamespace="http://xml.kamsoft.pl/ws/auth" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns="http://wsdl.kamsoft.pl/common" xmlns:wsauth="http://xml.kamsoft.pl/ws/auth" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wscommon="http://xml.kamsoft.pl/ws/common" xmlns:wsbroker="http://xml.kamsoft.pl/ws/broker" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsd1="http://xml.kamsoft.pl/ws/kaas/login_types" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/">
  <wsdl:import namespace="http://wsdl.kamsoft.pl/common" location="Auth?wsdl=ws_common.wsdl"></wsdl:import>
  <wsdl:types>
    <xsd:schema targetNamespace="http://xml.kamsoft.pl/ws/auth">
      <xsd:import namespace="http://xml.kamsoft.pl/ws/kaas/login_types" schemaLocation="Auth?xsd=login_types.xsd"></xsd:import>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="loginRequest">
    <wsdl:part name="request" element="xsd1:login"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="loginResponse">
    <wsdl:part name="response" element="xsd1:loginReturn"></wsdl:part>
    <wsdl:part name="session" element="wscommon:session"></wsdl:part>
    <wsdl:part name="token" element="wscommon:authToken"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changePasswordLogRequest">
    <wsdl:part name="request" element="xsd1:changePasswordLog"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changePasswordResponse">
    <wsdl:part name="response" element="xsd1:changePasswordReturn"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="passExpiredExceptionMsg">
    <wsdl:part name="fault" element="wscommon:passExpiredError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="logoutResponse">
    <wsdl:part name="response" element="xsd1:logoutReturn"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="logoutRequest">
    <wsdl:part name="session" element="wscommon:session"></wsdl:part>
    <wsdl:part name="token" element="wscommon:authToken"></wsdl:part>
    <wsdl:part name="request" element="xsd1:logout"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changePasswordRequest">
    <wsdl:part name="request" element="xsd1:changePassword"></wsdl:part>
    <wsdl:part name="token" element="wscommon:authToken"></wsdl:part>
    <wsdl:part name="session" element="wscommon:session"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="changePasswordLogResponse">
    <wsdl:part name="response" element="xsd1:changePasswordReturn"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="Auth">
    <wsdl:operation name="login">
      <wsdl:input name="loginRequest" message="wsauth:loginRequest"></wsdl:input>
      <wsdl:output name="loginResponse" message="wsauth:loginResponse"></wsdl:output>
      <wsdl:fault name="authTokenException" message="ns:authTokenExceptionMsg"></wsdl:fault>
      <wsdl:fault name="passExpiredException" message="wsauth:passExpiredExceptionMsg"></wsdl:fault>
      <wsdl:fault name="inputException" message="ns:inputExceptionMsg"></wsdl:fault>
      <wsdl:fault name="authenticationException" message="ns:authenticationExceptionMsg"></wsdl:fault>
      <wsdl:fault name="serverException" message="ns:serverExceptionMsg"></wsdl:fault>
      <wsdl:fault name="authorizationException" message="ns:authorizationExceptionMsg"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="logout">
      <wsdl:input name="logoutRequest" message="wsauth:logoutRequest"></wsdl:input>
      <wsdl:output name="logoutResponse" message="wsauth:logoutResponse"></wsdl:output>
      <wsdl:fault name="serverException" message="ns:serverExceptionMsg"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="changePassword">
      <wsdl:input name="changePasswordRequest" message="wsauth:changePasswordRequest"></wsdl:input>
      <wsdl:output name="changePasswordResponse" message="wsauth:changePasswordResponse"></wsdl:output>
      <wsdl:fault name="sessionException" message="ns:sessionExceptionMsg"></wsdl:fault>
      <wsdl:fault name="authTokenException" message="ns:authTokenExceptionMsg"></wsdl:fault>
      <wsdl:fault name="inputException" message="ns:inputExceptionMsg"></wsdl:fault>
      <wsdl:fault name="serverException" message="ns:serverExceptionMsg"></wsdl:fault>
      <wsdl:fault name="authorizationException" message="ns:authorizationExceptionMsg"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="changePasswordLog">
      <wsdl:input name="changePasswordLogRequest" message="wsauth:changePasswordLogRequest"></wsdl:input>
      <wsdl:output name="changePasswordLogResponse" message="wsauth:changePasswordLogResponse"></wsdl:output>
      <wsdl:fault name="inputException" message="ns:inputExceptionMsg"></wsdl:fault>
      <wsdl:fault name="authenticationException" message="ns:authenticationExceptionMsg"></wsdl:fault>
      <wsdl:fault name="serverException" message="ns:serverExceptionMsg"></wsdl:fault>
      <wsdl:fault name="authorizationException" message="ns:authorizationExceptionMsg"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="AuthSoapBinding" type="wsauth:Auth">
    <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="login">
      <wsdlsoap:operation soapAction="login" style="document"/>
      <wsdl:input name="loginRequest">
        <wsdlsoap:body parts="request" use="literal"/>
      </wsdl:input>
      <wsdl:output name="loginResponse">
        <wsdlsoap:body parts="response" use="literal"/>
        <wsdlsoap:header message="wsauth:loginResponse" part="session" use="literal"></wsdlsoap:header>
        <wsdlsoap:header message="wsauth:loginResponse" part="token" use="literal"></wsdlsoap:header>
      </wsdl:output>
      <wsdl:fault name="authTokenException">
        <wsdlsoap:fault name="authTokenException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="passExpiredException">
        <wsdlsoap:fault name="passExpiredException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="inputException">
        <wsdlsoap:fault name="inputException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="authenticationException">
        <wsdlsoap:fault name="authenticationException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="serverException">
        <wsdlsoap:fault name="serverException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="authorizationException">
        <wsdlsoap:fault name="authorizationException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="logout">
      <wsdlsoap:operation soapAction="logout" style="document"/>
      <wsdl:input name="logoutRequest">
        <wsdlsoap:body parts="request" use="literal"/>
        <wsdlsoap:header message="wsauth:logoutRequest" part="session" use="literal"></wsdlsoap:header>
        <wsdlsoap:header message="wsauth:logoutRequest" part="token" use="literal"></wsdlsoap:header>
      </wsdl:input>
      <wsdl:output name="logoutResponse">
        <wsdlsoap:body parts="response" use="literal"/>
      </wsdl:output>
      <wsdl:fault name="serverException">
        <wsdlsoap:fault name="serverException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="changePassword">
      <wsdlsoap:operation soapAction="changePassword" style="document"/>
      <wsdl:input name="changePasswordRequest">
        <wsdlsoap:body parts="request" use="literal"/>
        <wsdlsoap:header message="wsauth:changePasswordRequest" part="session" use="literal"></wsdlsoap:header>
        <wsdlsoap:header message="wsauth:changePasswordRequest" part="token" use="literal"></wsdlsoap:header>
      </wsdl:input>
      <wsdl:output name="changePasswordResponse">
        <wsdlsoap:body parts="response" use="literal"/>
      </wsdl:output>
      <wsdl:fault name="sessionException">
        <wsdlsoap:fault name="sessionException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="authTokenException">
        <wsdlsoap:fault name="authTokenException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="inputException">
        <wsdlsoap:fault name="inputException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="serverException">
        <wsdlsoap:fault name="serverException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="authorizationException">
        <wsdlsoap:fault name="authorizationException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="changePasswordLog">
      <wsdlsoap:operation soapAction="changePasswordLog" style="document"/>
      <wsdl:input name="changePasswordLogRequest">
        <wsdlsoap:body parts="request" use="literal"/>
      </wsdl:input>
      <wsdl:output name="changePasswordLogResponse">
        <wsdlsoap:body parts="response" use="literal"/>
      </wsdl:output>
      <wsdl:fault name="inputException">
        <wsdlsoap:fault name="inputException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="authenticationException">
        <wsdlsoap:fault name="authenticationException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="serverException">
        <wsdlsoap:fault name="serverException" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="authorizationException">
        <wsdlsoap:fault name="authorizationException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="Auth">
    <wsdl:port name="Auth" binding="wsauth:AuthSoapBinding">
      <wsdlsoap:address location="https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content>
                <con:type>http://schemas.xmlsoap.org/wsdl/</con:type>
            </con:part>
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth?wsdl=ws_common.wsdl</con:url>
                <con:content><![CDATA[<wsdl:definitions targetNamespace="http://wsdl.kamsoft.pl/common" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wscommon="http://xml.kamsoft.pl/ws/common" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/">
  <wsdl:types>
    <schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://wsdl.kamsoft.pl/common" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://schemas.xmlsoap.org/soap/encoding/">
      <import namespace="http://xml.kamsoft.pl/ws/common" schemaLocation="Auth?xsd=ws-common.xsd"/>
    </schema>
  </wsdl:types>
  <wsdl:message name="authTokenExceptionMsg">
    <wsdl:part name="fault" element="wscommon:authTokenError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="authenticationExceptionMsg">
    <wsdl:part name="fault" element="wscommon:authenticationError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="serverExceptionMsg">
    <wsdl:part name="fault" element="wscommon:serverError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="authorizationExceptionMsg">
    <wsdl:part name="fault" element="wscommon:authorizationError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="inputExceptionMsg">
    <wsdl:part name="fault" element="wscommon:inputError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="sessionExceptionMsg">
    <wsdl:part name="fault" element="wscommon:sessionError"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="serviceExceptionMsg">
    <wsdl:part name="fault" element="wscommon:serviceError"></wsdl:part>
  </wsdl:message>
</wsdl:definitions>]]></con:content>
                <con:type>http://schemas.xmlsoap.org/wsdl/</con:type>
            </con:part>
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth?xsd=ws-common.xsd</con:url>
                <con:content><![CDATA[<schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xml.kamsoft.pl/ws/common" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:wscommon="http://xml.kamsoft.pl/ws/common" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <complexType name="AuthorizationException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="AuthenticationException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="ServiceException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="PassExpiredException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="AuthTokenException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="ServerException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="InputException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="SessionException">
    <complexContent>
      <extension base="wscommon:BaseException"/>
    </complexContent>
  </complexType>
  <complexType name="ArrayOfMessage">
    <sequence>
      <element maxOccurs="unbounded" name="Message" type="string"/>
    </sequence>
  </complexType>
  <complexType name="BaseException">
    <sequence>
      <element ref="wscommon:location"/>
      <element name="faultcode" type="string"/>
      <element name="faultstring" type="string"/>
      <element name="faultactor" type="string"/>
      <element minOccurs="0" name="messages" type="wscommon:ArrayOfMessage"/>
    </sequence>
  </complexType>
  <complexType name="ServiceLocation">
    <sequence>
      <element name="namespace" type="string"/>
      <element name="localname" type="string"/>
      <element name="version" type="string"/>
      <element default="0" minOccurs="0" name="id" type="string"/>
    </sequence>
  </complexType>
  <element name="sessionError" type="wscommon:SessionException"/>
  <element name="passExpiredError" type="wscommon:PassExpiredException"/>
  <element name="authTokenError" type="wscommon:AuthTokenException"/>
  <element name="authenticationError" type="wscommon:AuthenticationException"/>
  <element name="authorizationError" type="wscommon:AuthorizationException"/>
  <element name="inputError" type="wscommon:InputException"/>
  <element name="serviceError" type="wscommon:ServiceException"/>
  <element name="serverError" type="wscommon:ServerException"/>
  <element name="location" type="wscommon:ServiceLocation"/>
  <element name="authToken">
    <complexType>
      <attribute name="id" type="string" use="required"/>
    </complexType>
  </element>
  <element name="session">
    <complexType>
      <attribute name="id" type="string" use="required"/>
    </complexType>
  </element>
</schema>]]></con:content>
                <con:type>http://www.w3.org/2001/XMLSchema</con:type>
            </con:part>
            <con:part>
                <con:url>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth?xsd=login_types.xsd</con:url>
                <con:content><![CDATA[<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://xml.kamsoft.pl/ws/kaas/login_types" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://xml.kamsoft.pl/ws/kaas/login_types">
  <xs:complexType name="loginRequest">
    <xs:sequence>
      <xs:element name="credentials" type="loginParams"/>
      <xs:element name="password" type="xs:string">
        <xs:annotation>
          <xs:documentation>Haslo operatora</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="loginParam">
    <xs:annotation>
      <xs:documentation>Pojedyczny parametr logowania</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="name" type="xs:string">
        <xs:annotation>
          <xs:documentation>Nazwa parametru logowania</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="value" type="paramValue">
        <xs:annotation>
          <xs:documentation>Wartosc parametru logowania - moze przyjmowac dwa typu: String lub any (dla wartosci zlozonych)</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="loginParams">
    <xs:annotation>
      <xs:documentation>Mozliwe sa parametry o nastepujacych nazwach:
1) domain - domena logowania - przyjmuje dwucyfrowy kod OW
2) idntSwd - kod swiadczeniodawcy
3) login - login operatora
4) type - typ operatora (mozliwe wartosci: SWD, LEK)

Powyzsze parametry tworza nastepujace warianty umozliwiajace autentykacje:
1) domain, login - operator w systemie KS-Katowice
2) domain, type=LEK, login -  operartor typu lekarz w systemie KS-Gliwice
3) domain, idntSwd, login, type=SWD - operator typu swiadczeniodawca w systemie KS-Gliwice</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="item" type="loginParam"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="changePasswordParams">
    <xs:sequence>
      <xs:element name="credentials" type="loginParams">
        <xs:annotation>
          <xs:documentation>Zbior identyfikatorow operatora</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="oldPassword" type="xs:string">
        <xs:annotation>
          <xs:documentation>Stare haslo</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="newPassword" type="xs:string">
        <xs:annotation>
          <xs:documentation>Nowe haslo</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="newPasswordRepeat" type="xs:string">
        <xs:annotation>
          <xs:documentation>Nowe haslo - powtorzenie</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="login" type="loginRequest"/>
  <xs:element name="loginReturn" type="xs:string"/>
  <xs:element name="logout" type="xs:string"/>
  <xs:element name="logoutReturn" type="xs:string"/>
  <xs:element name="changePassword" type="changePasswordParams"/>
  <xs:element name="changePasswordLog" type="changePasswordParams"/>
  <xs:element name="changePasswordReturn" type="xs:string"/>
  <xs:complexType name="paramValue">
    <xs:choice>
      <xs:element name="stringValue" type="xs:string"/>
      <xs:element name="anyValue">
        <xs:complexType>
          <xs:sequence>
            <xs:any/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
</xs:schema>]]></con:content>
                <con:type>http://www.w3.org/2001/XMLSchema</con:type>
            </con:part>
        </con:definitionCache>
        <con:endpoints>


            <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
        </con:endpoints>
        <con:operation isOneWay="false" action="login" name="login" bindingOperationName="login" type="Request-Response" outputName="loginResponse"
                       inputName="loginRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"
                       id="fdbc1c71-3909-42a9-b7f3-5e28384a6aeb">
            <con:settings/>
            <con:call name="Login" id="5fe2fa13-eb40-492a-8c2c-699638eed909">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
            <con:call id="2e994979-5f25-4a84-b927-27ece56b447a" name="Login Pass Exp">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="login"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
            <con:call id="14ad164f-629e-4ba4-b364-2baf0e6c3942" name="Login MFA">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
<!--            <auth:item>-->
<!--               <auth:name>mfaTotp</auth:name>-->
<!--               <auth:value>-->
<!--                  <auth:stringValue>857116</auth:stringValue>-->
<!--               </auth:value>-->
<!--            </auth:item>-->
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="login"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
            <con:call id="a47422ce-4dfa-42c5-a3c4-37cc479aab8b" name="Login Temp Locked">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1_LOCK_TMP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="login"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
        </con:operation>
        <con:operation isOneWay="false" action="logout" name="logout" bindingOperationName="logout" type="Request-Response" outputName="logoutResponse"
                       inputName="logoutRequest" receivesAttachments="false" sendsAttachments="false" anonymous="optional"
                       id="9e325de9-055f-4bbf-9afe-647f2188e966">
            <con:settings/>
            <con:call name="Logout" id="f632e298-c404-4b37-ac50-c676c12c7e46">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header>
   <!--Uwaga - Wymagana zmiana poniższych wartości na poprawne identyfikatory sesji i tokenu, uzyskane jako wynik poprawnej operacji logowania -->
      <com:authToken id="BSsO2fhFQ2WzcflIo92W4u"/>
      <com:session id="7F2D246DBD5EBE7B45F34A7384504448"/>
   </soapenv:Header>
   <soapenv:Body>
      <auth:logout></auth:logout>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/logoutRequest"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
        </con:operation>
        <con:operation isOneWay="false" action="changePassword" name="changePassword" bindingOperationName="changePassword" type="Request-Response"
                       outputName="changePasswordResponse" inputName="changePasswordRequest" receivesAttachments="false" sendsAttachments="false"
                       anonymous="optional" id="18a75fb3-f6b4-4624-9c61-13472035494a">
            <con:settings/>
            <con:call name="Request 1" id="a21e434d-a942-43ad-89cf-8318ea8181a7">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header>
   <!--Uwaga - Wymagana zmiana poniższych wartości na poprawne identyfikatory sesji i tokenu, uzyskane jako wynik poprawnej operacji logowania -->
      <ns1:session id="E527C9B6131D54AA54DB26455FBD3CC0" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <ns1:authToken id="BSSZ8rSZjRt09EnRS4jdaP" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <auth:changePassword>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePassword>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordRequest"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
        </con:operation>
        <con:operation isOneWay="false" action="changePasswordLog" name="changePasswordLog" bindingOperationName="changePasswordLog" type="Request-Response"
                       outputName="changePasswordLogResponse" inputName="changePasswordLogRequest" receivesAttachments="false" sendsAttachments="false"
                       anonymous="optional" id="9d178830-76c5-4307-af93-f9413a6fde31">
            <con:settings/>
            <con:call name="Request 1" id="99f6be88-17a1-415c-aa42-942299e3d5ac">
                <con:settings>
                    <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                </con:settings>
                <con:encoding>UTF-8</con:encoding>
                <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:changePasswordLog>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>01</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>SWD</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntSwd</auth:name>
               <auth:value>
                  <auth:stringValue>123456789</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePasswordLog>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                <con:credentials>
                    <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                    <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                    <con:authType>Global HTTP Settings</con:authType>
                </con:credentials>
                <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                <con:jmsPropertyConfig/>
                <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordLogRequest"/>
                <con:wsrmConfig version="1.2"/>
            </con:call>
        </con:operation>
    </con:interface>
    <con:testSuite name="TestSuite OW01 SWD" id="f937a2c1-e0f1-437c-a5ec-211dfcbb5980">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="fc1aac98-8bae-47a5-9a72-ab14056ec143">
            <con:settings/>
            <con:testStep type="request" name="login" id="4fb012a5-2bb6-4b3c-ac84-11ad41e5173d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="d7d24727-0a1e-4068-a4f1-9312e2c10a40">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="00c9b56e-e73f-4663-b5c8-4a42696e3571">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>393922F3005ECE1433BFCA731988D6DC</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSVCJAA2itErJF9KeOm1Pt</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="07020919-5612-4674-9979-3aadc1058173">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="3d8b65bd-5f19-4161-878f-9cea8914e527">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>
]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="6fbe7612-5c7d-48b0-8d81-3702c5ef028a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="5d033cb0-58f3-43bd-978b-c12f78deaeef">
            <con:settings/>
            <con:testStep type="request" name="login" id="b27b3c52-d01d-419a-9566-c667dc0fc441">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="0d70990f-9f53-4988-a6e7-dd7958a84a61">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4bd03bab-f892-480e-9560-077d79f6cfc7"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="e1b9bd53-b44d-4196-ac20-f53977c60c44">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="dc4e86a3-5c2b-4b7e-ab9f-dd89660ea542">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>5C2BF4A87FAA8F5673A745653E49143F</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSYNDvW1ESaRbH4yuL0cWF</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="8f9e7a20-97f2-4585-8aa9-f457f60612fb">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="e9dfe75b-84ce-453f-941e-9625d4e8ac31">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="1328ee73-1555-4575-9213-e9d2259b5036">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4b488363-0117-47b2-b843-0f4b09d7d77f"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="e36b751e-77c0-4d85-a0ad-2c004addcf06">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="6d17689b-2fce-4a56-8ed5-43f6314bcd1f">
            <con:settings/>
            <con:testStep type="request" name="login" id="994f97c9-c373-44b0-b3e8-7c33f6f731d9">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="e46ee3e9-b1f4-4724-a1b0-555d7fb7cddc">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="80bc2020-8050-456c-9f7f-73317958daaf"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="52a6dfcc-a457-44c8-ae80-3823d30867b5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="9543b185-ed88-4bb3-82fc-733d797321d8">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>1D0B8F726C86558A39C77204CE4B4A04</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSH7JZ4GyGVMVDWs8ZchhW</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="7eb80c0c-1e54-4db3-a333-d030bf443dfe">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="f75e299e-8511-4075-ab13-8e64e5d56410">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="a146e862-7e8d-4fe1-9e5a-c2298276dc59">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="e0c40367-3935-4d47-9f62-2379993021e6"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="7892f59f-4c6f-40c6-83fe-9ce8c955c0a7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="1a04e004-3faa-439d-8ec5-7fec3e63a92f">
            <con:settings/>
            <con:testStep type="request" name="login" id="26cc4138-e778-49b5-b5c1-165f5b833f49">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f021600b-084e-4839-b282-2f7a90da57eb">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f013c31f-6daa-4fd4-929e-022b285028a4"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="fab39d3a-7451-43a7-9e62-00c026b1ec07">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="15b55551-981b-4458-a2cb-9396c072f682">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>0809415861A699C2D9A256E62AF83728</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSgmI_zNQ3D3TK8BHJOpXo</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="22f9b395-5bdb-40d6-9bae-85d766f871eb">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="de6591a2-25e5-42be-b863-4df8974ca2c5">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="6994d74a-3925-4004-adda-c8be14a77c1e">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6e83eff3-8524-40bc-aed5-00035f97a5e2"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="1e9965b5-325a-48b7-ae73-0bd739c5457b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="d5a47a8f-7067-46ae-bd97-70ce11e7728a">
            <con:settings/>
            <con:testStep type="request" name="login" id="10fecf8c-9ad3-47b0-8052-482429023809">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="38d3485d-eb80-43d9-a59a-ffa52f3c4a2b">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4caab506-15c7-4034-be04-44f2436b9f69"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="a28b0936-07f3-43d1-87fb-e03366c73582">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="7cdb8c39-aeca-4216-bdca-44d74cda086c">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>D14702CAC2676A5484C4043B5216618A</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSk6o3tHbVc36wCXS4gWz4</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="46dc3f06-0899-41e7-8ff7-f10b46b1978e">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="38c89bd0-655d-4a3a-a0cd-7c6d0cfe76e3">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="dd6f534c-5ede-4f08-b146-3114e1c27424">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="0e378519-1889-423b-b3b1-5c1dd596319a"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="6f8f21ea-b3a3-4ca1-b6a9-d8a6949ff8ae">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="59080f45-fa58-4e3a-bbf9-5c42512521ba">
            <con:settings/>
            <con:testStep type="request" name="login" id="cb703211-7110-43e8-ab53-549437155a8d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0a355755-1fb1-4cc4-9cea-e82da29a0836">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="b43e46cc-89fb-45d9-ae68-b579640029c3">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>B5B66A3AF8B7559E362B46839B789674</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSB5hTlXu6aT28bGbj2QsX</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="f3c89b8d-101b-4253-a6b4-abea810b2b51">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="db5fe44d-baa3-4f02-b4c1-c6b21743e8bb">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="77708ebf-bb1b-43be-8738-32f237ae0d28">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="9ae8dc88-6bb2-485d-875b-b36e44b6c213">
            <con:settings/>
            <con:testStep type="request" name="login" id="b9641b18-183d-4a18-9402-324e43f965f0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0f5ace28-28f1-4d2a-88b2-e6967c32df19">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="96ffd441-a981-436c-9e18-a7dad2e2efd0">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>10E393D38CC9B14286929501EA2AE952</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BST8n3b3xrRbdVTCtFXClk</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="657cc01d-5d9e-41dd-a588-919537b5e768">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="1a7f922c-d776-42ed-8945-ceed2c512ca8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="7e71784e-de34-4555-a071-1015e8301295">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="478a8afa-af93-4046-9060-a1fe433c41ba">
            <con:settings/>
            <con:testStep type="request" name="login" id="84eb5ce3-91b9-4084-a5c7-15dac3841749">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="74350c03-4f9c-47e1-ad68-4d4ecdb6579c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="1cafc58f-dc3b-4cc7-9d35-78862240826e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>CB78744907E768DF0C12C348F2B1D883</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSgXjNgF25X6Nx1JKdpfbb</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="a9bb98c1-bea2-4178-8702-4a8ea8b837bb">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="05f23610-875a-4954-9875-92a6c0a4d2be">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="e42c7926-bf38-4a41-8aef-6a79b3a861de">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="764c73ce-4834-4100-b39a-f011226dbbaf">
            <con:settings/>
            <con:testStep type="request" name="login" id="3cac74e6-5511-4e3c-a91d-89637bdea597">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="fd9af6a8-d212-4cb7-9f77-8edd959378ca">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="30a0dbe7-b6e5-419e-9fd6-77aba77a93e9">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>6427C70BD181A34F99EF472095DB7750</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSbNgJCZrBhjjfdTSTjHxB</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="b1ac9f5f-937e-4abf-aa9b-0b0aa0f64e89">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="b7dcb41e-37aa-4609-acf9-7072faca5245">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="4123ebb9-24b0-4a03-ac4a-53f6e3a10bee">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="69b362a0-c5a8-4226-b7ba-f9318e50ee8f">
            <con:settings/>
            <con:testStep type="request" name="login" id="64f6f4dc-3ec5-4a47-bed1-848638a45ac0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0c99fc4a-9d85-4f1b-bc0c-9c413928d76a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="afcbac4e-9554-4b01-9572-b3a640003290">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>9C3DD58C48B42DCAA51473582E64AC03</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS6WnXgtOauThYjEpEprq6</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="9b02e954-4a59-4344-acf5-5fa1fc82f639">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="ab81e629-db21-409a-b361-d5bbd9e5655b">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="e507ecdb-9fc6-4b92-ac03-6696d810dea1">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="TestSuite OW01 SWD MFA" id="5d632085-a102-466b-aa2c-0986645e2f98">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase id="7e537df1-4e08-4f5e-af27-1d79641aa015" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get MFA"
                      searchProperties="true">
            <con:settings/>
            <con:testStep type="groovy" name="GetMFACode" id="6b58d5c5-8c37-485d-90e6-8f97c7cd9661">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="45680148-0b5d-4275-b80b-005c253789a6">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="7c8ace18-dbbe-4e3f-b123-b76e3b92a1bc">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport def suite = testRunner.testCase.testSuite long now = System.currentTimeMillis() / 1000L
                        def kod = suite.getPropertyValue('KOD_TOTP') def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP') long prevTime =
                        timestampStr?.isLong() ? timestampStr.toLong() : 0L if (!kod || now - prevTime >= 30) { kod = UISupport.prompt("Podaj kod TOTP z
                        aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)") if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod) suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString()) log.info "Nowy kod TOTP: $kod
                        (zaktualizowany w ${now})" } else { log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})" }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="78175d90-aceb-46ae-a271-0bcbe79a6756">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="ef3eeec0-e937-4ff9-bbbd-1e448629e5fc">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="04b998ec-2156-43be-837d-6e0f46d538d4">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>7ADA5249E6A327237076C0A18D7F01EF</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS88Scn9wnTEvVJkEXNRoo</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="016c71bf-fcfa-4c35-a077-21fffa277d45">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="4d16c2ab-a0af-4e40-94f7-b46a1e903971">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="5be1c3e5-5d4c-448c-a867-64978ef7c240">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="0e2f978f-a47a-4a60-8171-ef00ce67642d">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="bbf8831e-7c4f-47c2-9ac8-4bd00278c91d">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="da436191-8c3e-42f5-a04d-b1b7f32d0179">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="0d70990f-9f53-4988-a6e7-dd7958a84a61">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4bd03bab-f892-480e-9560-077d79f6cfc7"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0ccf4211-ba3b-4fbc-ad93-8d7429c4aedc">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="b340b7f1-f201-45b9-b925-331a3592a163">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>EAB94D9DE8F599646E73A4776333011D</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSB7m3XnoFzW_OXYsIOGu_</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="9bed2227-5d94-4063-bd1d-c227d75dd87a">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="7f7bc0d2-c576-4605-abcf-62d7d074dc48">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="1328ee73-1555-4575-9213-e9d2259b5036">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4b488363-0117-47b2-b843-0f4b09d7d77f"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="e155f00c-53e8-42a1-b7c6-4aba73efc75b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="42fde2b8-e2cc-4d20-94a9-3ff9b7173468">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="ee6092e6-4daf-4e9b-b88e-db3da5b85c97">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="8d781732-6ab3-4e74-9714-98a3961b6e09">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="e46ee3e9-b1f4-4724-a1b0-555d7fb7cddc">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="80bc2020-8050-456c-9f7f-73317958daaf"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="bd1f6f52-8d4f-4fbf-a18f-c65ac3ef4c8b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="f014bf31-b8e3-48de-a754-99f5dff29b56">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>EB41CC53DE9889B8255D8325022CB126</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSpXAwpm6EfOlfPA1grpkk</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="c4689b13-b481-4b53-b630-ee5d79de0921">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="fb99ca1f-f566-48e6-a4e8-f4c465a68996">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="a146e862-7e8d-4fe1-9e5a-c2298276dc59">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="e0c40367-3935-4d47-9f62-2379993021e6"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="97e498a6-d424-4466-b709-904bbbb7f415">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="b653519b-6331-4718-9d22-2b6685567859">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="c2156a5d-69bb-42e9-93b1-db05f8051afd">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="d4ae2d9c-a6f6-4695-9987-1685fc5e6246">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f021600b-084e-4839-b282-2f7a90da57eb">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f013c31f-6daa-4fd4-929e-022b285028a4"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="c554dd80-03f8-4ee5-a675-b8c37732735f">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="accda743-e638-4610-ab8b-a97ef4e01bc3">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>5B8010250400B6C07B6B3C6FCBA7F7F1</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSq2LuTGlLjU8jxk6_LMcn</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="044aa7a1-4378-497f-bb55-3b09d0b5dd41">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="708ba1cd-e7fd-44b2-8af1-859cb4a7aeee">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="6994d74a-3925-4004-adda-c8be14a77c1e">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6e83eff3-8524-40bc-aed5-00035f97a5e2"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="b08e081e-f4d5-4f3b-843a-85135d206116">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="ceeb4fb7-cc34-471b-8a7c-4fa460e89cac">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="057b1c8d-ec57-4a4c-890c-6fcd59da5bbc">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="720abae7-906b-4b1e-a2d9-62e46809ab7c">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="38d3485d-eb80-43d9-a59a-ffa52f3c4a2b">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4caab506-15c7-4034-be04-44f2436b9f69"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="300b47b7-b919-4ad9-9720-b4c17590f86c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="c6300927-56fb-43bc-864f-43140b83d793">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>C79EFB24F7BC29CE527EBC8E548BE1EF</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSEDpz8xzxXDpCHhHFE6EK</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="73eed595-d933-4690-be22-9dd06bb1cd35">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="810d15e8-95aa-40dd-8250-66812db27dc0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="dd6f534c-5ede-4f08-b146-3114e1c27424">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="0e378519-1889-423b-b3b1-5c1dd596319a"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="a27f1258-804f-4a6e-8406-4820720e5f48">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="755489ac-d804-420f-8c3c-8c2286c98dfb">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="26b1d9e2-c260-4a51-9599-ac76ce860fe2">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="ebc9703b-f607-4262-98cd-4a0786fd17f0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="ac9e91e7-7f4b-4bb6-baab-3fd5323db2a6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="2dafc0ee-093c-4e26-887b-2f6895e035d1">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>5B290254AF072D6E8FFC103DCD6B5D94</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSwsDkvSoX662OXnIrJa0S</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="aaf0795f-4777-4d5e-a348-e5a3103f47e6">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="73d815fa-b554-477a-9c79-f8ad3e76d58e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="0379c91e-8aa3-4754-b791-6aa12f72f2ed">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="05438f35-8891-44b3-9268-7d86e9a0344c">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="3c933aad-e435-48e7-b123-cc750cd68d15">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="f839f8cd-4277-4fc6-95de-c6700e61f7b2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="9dd66cd4-8fa6-4ef1-ab2a-ddb95a62b92c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="60445f93-fcab-4fa9-b64f-85442f1dadb1">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>0F16BB8B7BBA3183EBA059DC801FDA29</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSHYkAkd0ox+O9aO8nUD6d</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="d099ac52-e0f5-4c83-a5d7-f99f55526518">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="b506b736-af76-4ec3-b7a5-0c2fa3615594">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="8796fcc3-e853-495d-a3b1-22e3500f44d4">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="956dd53b-35f4-43e6-8f92-bea20f85d917">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="922541c1-5b7e-4148-9759-9ec1356dc223">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="10a66daf-87df-4844-acef-7b7ca0cfb3be">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="b0fd556f-2260-478b-b089-3a9f01208f22">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="989caa89-f0c7-462e-9589-e5278da96950">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>423B19F7FCE44F031AA64595DDCD2078</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSf+Gii72A8iyyxTMd2t3X</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="e16bce70-e8e2-44f0-849d-f88b857c5451">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="b4c96190-a3cb-46f0-94af-af55095c4c5b">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="0d1ca6da-51e3-4f9a-b3bb-53e03595e5c6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="bb238d58-f9e7-4916-8815-3417c1ee82a1">
            <con:settings/>
            <con:testStep type="request" name="login" id="3fd1db91-bf41-4af7-82b8-1e5589bed4a0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="70547916-80bb-453d-92a3-51c656b466ec">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="2406fd06-f25c-434b-be09-47126aadcd4e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>A2735FAE15CF1C35DA1E7EF26222C3D0</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS2LmUJR5glUFr4Z5z_o6y</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="8166b45b-21d6-4521-8fc3-76a3e037b71c">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="7d777aa4-1d06-42a4-aceb-c9b3b4ebd1b6">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="768c15ed-f596-49e1-87e2-9fa72be3a759">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="835dd0ff-6f97-4f6c-b9a3-d321d24ab52f">
            <con:settings/>
            <con:testStep type="request" name="login" id="5824aa27-aee5-45b3-a54a-c5181edbd324">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="581fb9e7-f4ea-411d-ac47-ef950953aae7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="76eacaa0-197a-4a77-88a3-0ceba378be66">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>4EC5EA728DD96D95ACE798CE4A2307EB</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSSyNrCI4_3PL7NqZxh8R4</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="aae2d2a2-c6b8-4d62-8034-476f3c4c1982">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="e2d274e0-69c3-44d4-b983-824aa64aec2f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="0ec466f6-9b6a-488f-9761-69ebc2b4469a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties>
            <con:property>
                <con:name>KOD_TOTP</con:name>
                <con:value>275997</con:value>
            </con:property>
            <con:property>
                <con:name>KOD_TOTP_TIMESTAMP</con:name>
                <con:value>1762099688</con:value>
            </con:property>
        </con:properties>
    </con:testSuite>
    <con:testSuite name="TestSuite OW09 LEK" id="cb8f5905-6566-405e-8128-7aa3b7f8dafc">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="f7e3b257-236e-42b0-8b92-ec47d036fdd7">
            <con:settings/>
            <con:testStep type="request" name="login" id="70b1f145-f691-4685-aedd-d2255c786209">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="fb1b151a-0842-4e46-a7fa-28c0cfcf7bb5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="7d5adad6-9e3f-43ea-9bcc-cf0c0c8bd144">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>8DCF11A51A906F87D2D326E2FF9837DE</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSPnTtJnxZjlfZBzbRG066</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="02a57503-ecbb-4e18-a888-ba7cd01ea5c8">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="5fc439d0-ddc4-43c9-8180-42aa74143799">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="caab4057-5789-4769-9173-3f814de7abc7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="43096369-94fe-4a40-bda1-3773bf4ae1fb">
            <con:settings/>
            <con:testStep type="request" name="login" id="ba4e5d11-2749-4359-9a08-b92251d65c81">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="e5c543d2-11ee-4237-be1c-5527012712a6">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="098a9d41-1375-4c53-b205-f9d230564719"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="34476564-2b0d-4218-9cdb-a1b26a7cb6b2">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="5d78c01d-b192-43d9-a100-51b4e1cea6f7">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>9EFEE6ADD80C7085A45C06A9D4AEACD6</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS_1v7ApmVxmc403zJx5lZ</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="db0b9011-8743-43fc-a1b9-73ef8c85eec1">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="4d35867d-8c97-4f5c-9c98-03d86f7f37af">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="a0bba083-47ba-4669-8d66-5ab43fee92b3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="237fd05a-7256-4c3b-a179-066824fd3e29"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="a7a2fddf-d78d-4a11-afd2-786f9f2318cf">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="b1fc63f3-50bb-4dd6-a676-b9089b3fa4d3">
            <con:settings/>
            <con:testStep type="request" name="login" id="9d0ed957-da8e-47e5-9661-7ad463c214b2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="a40bda9d-87da-4470-81e0-91957d8b280f">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="e9967d30-fd17-4411-90ef-3d2750a507db"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="24714fb2-01ba-4f02-a479-273cb70ece2c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="7762a14d-43e4-4f68-8e1f-48f49a63b461">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>EED40E2AE880ABCD02BF880C04EE0C81</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSnllHDkMhtTEIP4pRTD9s</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="6a0aecd2-9e31-45df-a00d-ca6190c2a6a4">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="597ac1a2-f52d-4eea-ace4-dcb847e45d31">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="10afce66-754e-4bb4-a95b-94168235997a">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                   <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a299bebe-6049-457c-b7f8-6a010328ad9f"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="eceeafe3-c3f5-45a5-af2d-fc0366cbc587">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="ae171b10-01b3-4323-9bb3-e585bb8bf756">
            <con:settings/>
            <con:testStep type="request" name="login" id="efe80c6b-628f-4eef-8a15-4dc9e280c95d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="8bcc1f6a-8547-4fee-8470-e6e06be848fc">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="138cbe9a-237c-4d62-8936-967efaf12dda"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="8b5cb55c-475e-4b96-89d2-550a1417c2a9">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="0fd21265-6695-40aa-9c75-53faa0262e23">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>025A4914E1DA231DE5D9CA03D805452B</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSHWfWMN3SZCVoLbAV_2Uk</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="23d6cf4e-e988-4420-a0e8-45c6e93f5c08">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="3b20ea5b-b54d-47da-a2e2-ad1401920241">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="4027aad7-c9fb-4636-93db-2e990681bbf0">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="9f4cec98-52a2-4d16-9a1f-6e277172518e"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="60132958-311c-4951-8c32-ce4b0b640ebf">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="17471861-b63f-48d2-88f3-c7ae6edc0eae">
            <con:settings/>
            <con:testStep type="request" name="login" id="9a84a8d8-b975-4218-8d58-3ead6c2df7f0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f6338977-580b-4494-b62b-3e809da78cb1">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c61c7a1b-f64b-4b2d-8e78-32d87b067a37"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="fae54fd7-1cb9-4ac5-ae1b-3cb9588655b4">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="bcadc215-e669-42e9-bb8b-9a5295b69024">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>C2FF8637C3277DF3559236DCFA72123D</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSF+QzXKK2IXZbUBIJr_td</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="1a09d773-41af-4cc3-86d8-a6f98de08464">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="8991248d-dc28-42ec-ac7a-8741f3301a34">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b2e21ee8-ae7c-4369-af4b-f47a8aa2aa23">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a953a7d7-3fb4-42f9-883f-05c02a6d83f5"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="045675a7-8148-44a1-8802-5b06276650d7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="cea4ea31-1303-48ae-a7b6-fc057bfccdc4">
            <con:settings/>
            <con:testStep type="request" name="login" id="5d86823a-c8e4-4e73-b7a7-a0a6619219b6">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="06e2f65b-7902-47b2-b741-b592f0e71c8a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="47f27ac9-7fd7-4d93-800c-9cf55d513e79">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>B667A9C4F18420361B6813418D8515EA</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSA7xqi8g8+SQ37Nf+lA3p</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="d94aa1a4-229a-46a4-9ec3-55ee9ff38b49">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="d5b4e4bf-4e47-4af4-927d-e9cf0e01eb71">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="4c0153ad-71df-476b-93a9-32a367006dad">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="c705758e-2294-42c2-b5c4-e5b2cfbbb090">
            <con:settings/>
            <con:testStep type="request" name="login" id="82270b64-60f9-4132-a032-39560e55c410">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="466922c6-a7c4-409c-a54f-38c9a09a04e3">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="f4f8ae45-ecf6-4beb-9087-07dd1be59fc1">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>562D85C773239FE46DD5D4361ABB08F4</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BST3VWLkmkRadeCoHovg_W</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="7ac721c5-1cee-437d-8347-4ff1572ea26d">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="a35b4610-b1e4-4a77-9891-0dfbda012c63">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="a095c932-2939-49cc-92c1-c340efc4ace4">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="3ef05da2-a009-45c0-aa82-acd41ddbc51a">
            <con:settings/>
            <con:testStep type="request" name="login" id="694da083-d4f9-43dc-8649-01d1d9392d9b">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="f240474f-6203-488a-b40b-6ae56f0c6957">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="61cc387c-964e-4e1a-b19f-3ee7dc7c8d15">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>034F3B472032B0E9099CA33DB77BE726</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSdh3H_0kK1zJ9YxacLZLw</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="d91c09f0-c5b6-4b42-9b59-0a7592158230">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="3b569caa-82c7-497b-b60b-da9621e3f043">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="57f700d0-6acb-48d2-ae82-a93608c78a88">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="acc0ab7b-5654-4383-9856-594eba7127c8">
            <con:settings/>
            <con:testStep type="request" name="login" id="1e81093a-8462-4d2b-9b22-a103a30e455e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="053242d5-fbf5-419c-af24-7c909ddc565d">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="24ade777-6023-4a57-bd6d-ae915f5943f2">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>D8B8CA7A20B39139B1105E3F84C2E8AE</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSzUM5+T_Lvx6t16WYuvhf</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="e6b44bc0-f483-449d-a060-2a1939fbd355">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="6e50bf7f-523c-45cf-bd1a-f582282b7f4e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="2d37ffa5-1686-4a98-92c8-8381a4e18212">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="7a321a17-b351-48eb-8fdb-a8ea5da9c54a">
            <con:settings/>
            <con:testStep type="request" name="login" id="6c9492b5-d82d-45e2-9522-b72830f216d6">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="5b5b488a-0709-40e4-a407-870e047979d8">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="2bfa2098-605b-4d5f-b220-96659b52c199">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>965CE5B41A360C4CA92D6BBA9568BC81</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS+dY80Mz5Zx1wzI8Pfhg_</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="fcacd958-bef8-473e-b2eb-78f4699814d9">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="88ac464e-ecb5-46ac-8467-db3c8a792d97">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="e4873f12-133b-4aad-a058-feaf825855d3">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="TestSuite OW09 LEK MFA" id="13f9e6ef-63a2-4e75-a4ec-47af1eb4665c">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase id="82f2c315-9875-44e4-b8e2-91cc3d34ba51" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get MFA"
                      searchProperties="true">
            <con:settings/>
            <con:testStep type="groovy" name="GetMFACode" id="67cbc94a-a2df-4c21-8cc8-489976973c76">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="5ce69c6d-4808-4653-ab1a-e6203f7ad212">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="8294563a-d6cf-405f-bec6-0886e5c072af">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="156a767b-cab2-43d1-b7b3-c5b5ace6a321">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="98e8745f-fc6b-4ae3-ae4c-53a82e071928">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="31d563de-fa39-4221-90bf-ba976542902d">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>31A01C5051D9F369DEA943C728ABD6F9</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSyZIUEAiV_QIIIri2xhsx</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="d87cf108-b6c1-4ab4-ad66-c291d2089085">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="d7394c64-c418-4cf8-9179-300b45baa0f7">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="0871a60b-8e26-4fab-b00c-98f800d1e7fd">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="61f1b33f-853a-4ce4-9dcc-6bd2e16166bb">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="fd7115d6-053d-4d69-bf6d-65efbd7ab417">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="11a76241-b717-4582-8c0d-8d49922803ab">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="e5c543d2-11ee-4237-be1c-5527012712a6">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="098a9d41-1375-4c53-b205-f9d230564719"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="32505dc0-18db-4e50-92d4-78bd6baf2000">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="54dd67a3-939b-450a-b771-4e1f9ffa7aef">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>8C77447DAD21C91B7588E20E3A44C5EE</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSGcGpyGHo+r4KyOYn68cb</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="52ba54b3-1bf1-4043-87f4-2b2fcfab60e3">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="a3f15ed0-463b-4326-8225-5d5a630697aa">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="a0bba083-47ba-4669-8d66-5ab43fee92b3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="237fd05a-7256-4c3b-a179-066824fd3e29"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="f8399cbf-f9df-4fe8-be2c-fe901868cda9">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="aa62a0d9-a933-4126-aff0-5c448257a6c3">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="f1296494-e4ca-482b-9134-25302455f468">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="89ac53d3-3fa6-469e-aa30-48c2c20018da">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="a40bda9d-87da-4470-81e0-91957d8b280f">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="e9967d30-fd17-4411-90ef-3d2750a507db"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="35b2d5b1-0127-4c17-a900-f2630cf7c0f0">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="f3d6d6c9-9c17-4d17-89a2-755a6613234e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>BCD2235CB58426F6C1047EF510E4538E</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSClur5IFUCZDqBJ4K3Ytd</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="047953b1-0885-4a91-bf23-a95f9c0476b0">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="195355d3-0b21-4fb7-893c-2969c41037af">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="10afce66-754e-4bb4-a95b-94168235997a">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                   <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a299bebe-6049-457c-b7f8-6a010328ad9f"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="d89d29b0-4109-4d4f-b747-c81af39a4ea7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="aa329d15-8e69-470f-b2dc-55bd800f05d2">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="91d8be5a-8f69-4798-8979-28f859d11eb7">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="24645c2c-05df-4978-a223-075ad522a3c2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="8bcc1f6a-8547-4fee-8470-e6e06be848fc">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="138cbe9a-237c-4d62-8936-967efaf12dda"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="a198ac33-a8da-4042-94ed-02c42bbdc1fc">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="f3dc06c0-f971-4365-aea0-53ccd8d5fce8">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>E689D8293769ADF0E06AF69D7BD270AF</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSO+2qL6gL9_Fg+UIXbljB</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="39b641a7-a6ae-4558-a6ea-d181c5d303d7">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="650a69a8-6e6c-4db9-82c7-8892e1d39c93">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="4027aad7-c9fb-4636-93db-2e990681bbf0">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="9f4cec98-52a2-4d16-9a1f-6e277172518e"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="96beb31a-a8e2-4ade-8486-d117b8581804">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="63ef2aab-23f0-468f-bae9-80b865f58073">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="5b7ef609-9f15-4f9a-a629-84248c8afa35">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="4e451ca9-95c1-4d83-a24f-cbf6109864e8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f6338977-580b-4494-b62b-3e809da78cb1">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c61c7a1b-f64b-4b2d-8e78-32d87b067a37"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="90951232-5eb5-4682-8996-bdfca3c12683">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="6d9ebe0d-dbde-4af1-a6bb-2df8cfeafec5">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>DE220C6C3300486ED83786DCBA31AB8C</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSyDAsWf1F01PTlfGOX06r</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="520dab44-89dc-49fb-9826-13e1beee524f">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="14ee616b-c8d2-4393-be67-3f85279f237e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b2e21ee8-ae7c-4369-af4b-f47a8aa2aa23">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a953a7d7-3fb4-42f9-883f-05c02a6d83f5"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="7f331dbe-75cc-468c-848e-f784eaea0afb">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="07aa4ecf-eced-4766-9e52-6a20d3088666">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="53febdf7-e413-4022-8972-0dbd69086d66">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="10c83aa7-3b17-45a9-973a-efd000ba284d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0742b73c-1b76-45e4-9d70-96069aa45a19">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="c0155cf2-600b-413f-a0e3-abe5999320e8">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>7E7BBCF6BD7205BF1CB4339328A0D9D1</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSeaPWUa6+AklR2OSN9QR4</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="11ef9961-465d-4bbf-8431-b7afd9bc0d46">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="3b6ba7d2-1f30-4913-acfd-3b63c512ffbf">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="c80fa233-db6d-44ab-8ec4-49a3ed63cec5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="ffb218ca-11e1-42e5-b31e-a9d6efff51a8">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="110d5b96-aa1f-4803-9a16-2771fe80e0e2">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="f6ccfdb7-9bcf-4e3b-bb62-67319cbfa653">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="2fd94e44-8424-4df2-ae79-a657920b2c04">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="534b0b10-c5f6-4e93-8be9-e16c31bea89a">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>5E8F2C293DD955252D45416146BA2C8B</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSZBSHZyGF4VEhG9_G0+MS</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="041796dc-4ca0-4fb4-9adc-9eb6bb96e3d5">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="8e8bafb9-84ce-405e-8b60-dddc40d0133d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="cf7f784d-2c5a-4c3a-bab6-5d5d52f739e5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="dab0ce98-01ea-4b39-b9dc-2d6166daadbb">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="1798c8b4-07c0-4111-b2cf-2c46cd415cd9">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="8c506717-0a44-42bd-9cda-217c990eb9fd">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="9d3e5a91-c019-421e-9d43-afcee6b80fb3">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_MFA</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
             <auth:name>mfaTotp</auth:name>
               	<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               	</auth:value>
            	</auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="581fee95-6c49-4f84-b63f-dfd256915f12"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="884386dd-bb29-4ca0-83a8-992f5880ea4b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="f43d625c-295c-43df-8f68-48e230ebea60">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>A33FBA38DAA206F9BEDDCBE0625FDC40</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS2aLayC7CPDbbPwfQhpds</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="ca00c510-0fa9-4a48-8e6a-59e0621606db">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="ca2b5c4b-33db-4ea9-b5d2-ec9bfc5d7890">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="59005fce-aa64-48fe-9c39-b81d9f7d2d83">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="7005d5d6-1842-4661-b4db-b2e89d79eeff"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="49258c18-c678-4f35-b984-e7fdcf883e90">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="56e03418-0dcf-4b03-969c-0199ff938bf1">
            <con:settings/>
            <con:testStep type="request" name="login" id="98817352-fbe8-4148-b052-4a859e9bb6e8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="9b354a04-e0ea-4cb4-8020-e1e038b0ab7a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="4136575a-6b58-4b9c-94bd-09feb223d98a">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>4DE81ABC7A20BCAD61E29C9B633E9B96</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSfppZUgmD+O_a59rhSm4m</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="efe5019e-009c-427b-9566-243dc9b28f53">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="9d7c2995-6d14-4bdc-ab40-cb6ffef224cb">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="7a39ef32-53cc-42fc-be09-bc51adbc42ec">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="9c2d210d-9f9e-4392-be39-b89c4f760b67">
            <con:settings/>
            <con:testStep type="request" name="login" id="b31efe49-866c-4367-9e86-dbdde5fc8c8d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="d2254e52-0a36-4b06-a08b-361f5169e679">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="8c030ee5-8456-4a58-b715-65c90fceb98e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>4756975E52256FFFC3AD11031170B6ED</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSQXGfA6yl64rUzZzNBXze</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="cd572353-9ebd-4c27-bb23-2764b77ecfd0">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="33156256-fefe-4815-80d6-7c9814ade384">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="1f46b748-946d-4b38-aa66-bdc7390b3216">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties>
            <con:property>
                <con:name>KOD_TOTP_TIMESTAMP</con:name>
                <con:value>1758266955</con:value>
            </con:property>
            <con:property>
                <con:name>KOD_TOTP</con:name>
                <con:value>094939</con:value>
            </con:property>
        </con:properties>
    </con:testSuite>
    <con:testSuite name="TestSuite OW15 SWD" id="44c78aa9-de4f-4219-8266-1dc16e450c02">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="ebcc9910-0f55-4ddf-889d-920e0dff38ee">
            <con:settings/>
            <con:testStep type="request" name="login" id="2590222a-bf1b-4ac7-97ab-74757b28c1a2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0cf7fcfb-3f32-4fdf-b100-5e183279717c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="bd6ee646-1961-4df6-9513-4d5c1d5421c0">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>3D2C9DB28650C4C5129EEE2296C45B09</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSvkbi54sDRksCmIXq5x0l</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="54de8861-8183-46d6-a907-929c2eae798c">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="18ee8732-8979-4d2b-85ca-9e8660c72653">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="7563fbd8-783d-4581-ab14-8171db088c97">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="e1c306cf-aafa-428f-9373-e818454dca82">
            <con:settings/>
            <con:testStep type="request" name="login" id="2fdb2dec-a266-49e5-ac75-635ab1dcae62">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="44b80d3b-c1d7-4ecb-9ee1-4bcc2358d078">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a1a9b124-2346-4d7d-8e54-89f0ba25f401"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="f800651c-3fc6-47fe-93ed-710fe6474f13">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="00b1d130-7eb6-49c2-9136-3b992f676164">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>4ECA89637EFBA7AD34121F367BEBB3F9</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSQthqxIsCFUATLRVF42Ym</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="a1f835eb-cc46-4364-bda2-87a81f634620">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="4542cfa1-3afc-4299-af77-b8d7ec4ad2a4">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="05d677ec-2eae-4179-a922-cb9a94a93ff0">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="3dcd262b-46ca-4710-9929-8565b75b5df2"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="ed5ee0ed-c19e-40ad-ad3a-5dd505de7a40">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="e4d50de7-f90a-4d86-8618-fa169292ee07">
            <con:settings/>
            <con:testStep type="request" name="login" id="ecd95e68-b989-4b76-9cc6-ebbe92386758">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="c42270d4-65c2-43ad-bfc5-8ca64ad2641b">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4b633f3-c8c8-4dcb-835b-b8a9467fe2c9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="b03ce937-8b1f-4f12-89db-de9646ad5a3a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="7165e825-764a-4db1-b809-55933ad6a641">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>9CE7C9A65F35C531AF0B944A3BEE8121</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSnVrWZEm7xiPNMnesd_Z0</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="decdf331-e18d-4ed2-8b72-9e1e1dcdc81f">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="827a2574-bed3-405b-ac1e-056e3eca5674">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="9d3068a4-065d-4dc1-8d1c-f2ab672ce016">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="5602cf59-a1aa-40c2-a575-8c3f08edff79"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="205e8de6-6827-4eab-b097-bffb3b96e96d">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="a70830a8-4ba1-4002-b70a-6431ff9ff09e">
            <con:settings/>
            <con:testStep type="request" name="login" id="17e93a10-7ce1-4213-9773-a45bfe0a595a">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="29a59a2f-9ced-4680-828b-bfd11a38718e">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6ac7bcf0-d89b-4618-a2e2-9c2ed67e0959"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="4f6a7fde-0a8f-46e2-97da-d2d0cca0dfb9">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="7d62e9e5-abc6-4a3f-b034-b31128b6fc62">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>05A9A185940DF7BF079C802DA41AEE4E</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSf5L5RXS9GBAGDl3sazjb</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="b2660ba8-d794-4dba-ab4b-ee94db67cb51">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="c4c45787-d5ed-4a6e-8911-85974d1c5a7f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="9c4d9ef3-266f-490a-bfff-7818c793b249">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="03cceb2f-bea5-4f5f-82cf-164cd9ad3bf9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="8b594b95-06c9-4ba9-93c5-68933522954e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="384fd6f1-2d3b-4320-95f4-88a1a3d1288c">
            <con:settings/>
            <con:testStep type="request" name="login" id="d374cf82-3710-4336-8729-312d117c3744">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="72ad2422-2f16-46ff-aa41-28d031c4fc2c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="e433d289-5d43-4b37-84af-83af5ab89bce"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="cd0c79c2-5f82-4514-95e9-8a9937487ede">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="b6ea2622-6143-4cd1-a182-5e1c42b8cd71">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>51ABD1519FD28547A6A11B44D37A7ACB</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS9jXjSxoOrgxaDdJAZNew</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="c8d565e5-86d0-4875-a620-42aa9f217c7e">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="24a95baf-bfba-4091-93d1-23c2a6203af9">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="47afc20e-0337-4728-bc3f-7741c12f576c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="fe35d40e-6d2d-4da3-a91e-c3784c22d837"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="971cba80-62c1-4874-b30d-7fe1a7cd5c91">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="de18725b-fd6e-4089-a02a-a4bd80abdc0c">
            <con:settings/>
            <con:testStep type="request" name="login" id="c6026537-c99a-412d-8b42-0f75fae9626d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0355ef49-866a-4641-b153-a555ce7e7553">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="f39bab1e-2655-460c-b6d4-a9ee4a965596">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>9763462F6C038D3F212AF8E8EB921761</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSRKaINOt9NFV92iqt0kkz</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="257b80bf-5d57-4171-be3c-124eb62e0b9c">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="c9e1dbd3-33f1-4b57-a595-528865feb52d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="ec023892-9516-4d92-9a94-3b827c4a6ea8">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="6b4fd681-88a2-4cca-9ad2-edf74ea3c2b0">
            <con:settings/>
            <con:testStep type="request" name="login" id="ae8d25de-3fda-4d00-afe0-3177b36aadba">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="985c41d3-6efc-4857-b489-f7b9b43457b7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="8e727d16-bda3-44b8-97ca-b4c6a6228dc6">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>E2390A754A4D1E921B26807C16687D60</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSD0_YMCEuSTmAIIGc4NA5</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="22dfdc97-380d-4f2b-8d39-72a6f1df7172">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="cd4488d5-d03e-4dcd-964b-b9d1477aafe0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="843dadbc-5075-40b9-8ed9-f3029f4115e4">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="85f4dc22-42f3-473b-97c7-2cb2b1353f67">
            <con:settings/>
            <con:testStep type="request" name="login" id="9a52cfa0-868f-4aae-a65c-e2d3837c5d97">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="67b7c7b9-4ee7-44e7-b69d-cac4bebbc993">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="3ec13c3c-a25a-4a80-83c5-4b0a77f7b59a">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>B669BD13CE124A72FE1CFDF611E4D904</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSGwHda2hAYMzXiCALUigf</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="c2a0a344-e086-4249-b753-23472a0dc973">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="b119a665-2e2d-4ef4-b3dd-2358231677dc">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="c2a634dd-c639-4b2a-8f13-e5c87632cf78">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="d2708446-777b-4f0b-98fa-ed5b0b0d6484">
            <con:settings/>
            <con:testStep type="request" name="login" id="f519685a-ef31-41e6-b50d-8161ad513bae">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="3f368d5f-0ee3-48dc-a708-a6f394922714">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="c8699f21-c033-4bc0-aea6-8ad4d97e5308">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>AFCC1E3F48403C1A16218ACF12B53A0B</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSWDmXvoBGFlsBlsLGkf_y</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="eeff90a3-0883-46a6-8380-bf46d291c4b8">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="684f6ec1-ecdb-4d0f-9b35-aa0447be5c87">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="a2c5da03-224d-4558-b7cc-d805d1fd1c44">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="2a3d8382-c411-4ff2-97db-20e4dda734f0">
            <con:settings/>
            <con:testStep type="request" name="login" id="ceba4659-0efb-4373-a56d-fee5323c352b">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="cca39e09-5eef-4c09-a93b-1c385d4a7d4a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="d5c02b34-738b-4544-83de-ae77f5fdb0d5">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>BF797812D3938672E4E7CCEDF3026B55</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS6eVG4ApL6270WdiiWfUm</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="44b9b244-518e-4ada-b619-1bbd53898541">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="bc85d7b7-9921-4736-a9d2-1a0cdd91c342">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="10e91320-0690-4d32-b10c-88a5884a238d">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="TestSuite OW15 SWD MFA" id="87d52883-7e55-4244-a52c-177174a50057">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase id="4b6bc62c-83be-43ea-8013-29bb1c883076" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get MFA"
                      searchProperties="true">
            <con:settings/>
            <con:testStep type="groovy" name="GetMFACode" id="0d34c840-dbf2-420f-a86e-4ae343ff3935">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="2eac29d7-5ef1-47af-93d3-b1ed4d9147f4">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="58aed3d5-3791-4eba-9da5-6ec80ceb6d74">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="f7a4100b-8c88-4603-a82f-72af961757cf">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="76e51ef1-6aa8-44db-9329-103fbe44cc3e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="76c11539-4e90-460c-a7ec-05995674bd70">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>04D4C8560F1AF364E6721689BFD0C12A</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSYDGg_IUyPKPrPy2_I8pl</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="de22fc7d-7acb-413c-9e27-a77e723f60d5">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="5b7c0c62-73b9-4e35-9e6a-f8f299291bf4">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="5aee4454-e751-4ba5-8061-1960a474d3e6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="716c7176-d64b-4c6c-accd-0aaa609ddb40">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="374a671e-d15b-4da1-967f-5b532866aef6">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="af1cfc8f-35a0-49aa-a6a2-4e20a8a5382e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="44b80d3b-c1d7-4ecb-9ee1-4bcc2358d078">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a1a9b124-2346-4d7d-8e54-89f0ba25f401"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="8d13200b-a3ca-49bf-80cd-96dcbebd1a4b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="0a314b78-7fa3-4f72-9ed5-ad4d21bd6434">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>8787513BC14451629E170F2494BE12D2</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSaxQwcE_6_fhQ5xE47qey</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="cb03602c-8bb0-4cc2-a94f-de342cd9b2a0">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="83a53e25-dc8b-4625-966b-34ff5c951c8e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="05d677ec-2eae-4179-a922-cb9a94a93ff0">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="3dcd262b-46ca-4710-9929-8565b75b5df2"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="f6707869-6239-448a-b6c0-7ec96d73ba90">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="25628b79-0922-401e-afbc-6f43a57f2eb1">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="025118cd-6ba4-45ea-b366-da9ec3c9b6cc">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="a6d8a5f5-1f64-4f94-8f91-b5f9263628ff">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="c42270d4-65c2-43ad-bfc5-8ca64ad2641b">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4b633f3-c8c8-4dcb-835b-b8a9467fe2c9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="07f3295d-88bf-4f6b-a9a5-26964befa1de">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="2c1a6522-3526-4343-881e-e88da0a1498e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>0928665B704AE7F8DD70A78997618405</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSnYE5y_IxcWt0m2KACQdp</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="450a1364-5fc3-40da-a63b-7cb20482e738">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="b5c16371-7391-4724-a37c-084a109f9ad7">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="9d3068a4-065d-4dc1-8d1c-f2ab672ce016">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="5602cf59-a1aa-40c2-a575-8c3f08edff79"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="4275597e-5508-40d1-896a-42fd6437ffc1">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="b908710f-7f7d-43c5-9ba0-1b083cefae33">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="ed5bc912-382f-4175-973c-6ae609344451">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="65606c85-c398-4e04-888a-2dae4b6be249">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="29a59a2f-9ced-4680-828b-bfd11a38718e">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6ac7bcf0-d89b-4618-a2e2-9c2ed67e0959"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="4a697021-2618-4184-94b8-e32997339bf0">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="1013fc51-f0ce-47fd-a317-826d5b8a46bf">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>54710143844A8A3948D4E09D45A9EE3D</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSi_d9_WZ7pjB0OG_P6dZr</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="7d417830-693b-4ade-a55f-f496ea30b1ee">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="cfccdc8e-7d0c-46b6-8806-e8695cf61f5d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="9c4d9ef3-266f-490a-bfff-7818c793b249">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="03cceb2f-bea5-4f5f-82cf-164cd9ad3bf9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="8ff71076-52ff-47bc-984a-7fd3231afb4e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="0605f6fd-6ca3-477d-ad3a-cddb5ecb0c55">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="2afdfbc9-0df6-412a-b19c-1165717017d6">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="11ded722-48f0-4363-9039-41eca9ec91d5">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="72ad2422-2f16-46ff-aa41-28d031c4fc2c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="e433d289-5d43-4b37-84af-83af5ab89bce"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="77ffe80e-da93-4a03-aa72-c0d7f19fa656">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="294981f4-3807-4143-8e65-67d75b6e3d1c">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>A3CD7FF36E6829D88197F3A463AA5295</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSkSk4olV3FxcrPR4yI_YG</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="abd4559a-2ec5-4832-b7ff-0564c4a45a9d">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="375ea13f-424b-4de6-88e4-f4d0f9d2fb3e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="47afc20e-0337-4728-bc3f-7741c12f576c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="fe35d40e-6d2d-4da3-a91e-c3784c22d837"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="392ad4bf-f81d-40a0-a7d4-a0e98d740c97">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="d478fe66-80ca-437c-82c3-a59b3e5b4470">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="bb4362ca-9f9b-438d-a615-aa0378aadc1e">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="ecca2142-b3fd-4fe2-9868-6a442028a4e1">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="42787674-1a24-4615-8229-58d8d2f9ccc9">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="1eb0be3f-6065-42b8-ae90-56ecb84673e4">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>695A82C07A1E99C6657928BEF2F05356</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSgWf5_gz_lUe9BgS97vGL</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="7f64bb48-6407-49e4-97e4-a030b7e4e85c">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="8286496d-1faa-4ef0-b160-ce7e80cf4090">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="e3ca580f-a66c-4fd8-a279-5d850f962768">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="84db7fcf-7e47-42f9-b2f3-9e56d028edfd">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="f4d6927b-7298-457a-9b81-c85363fe4755">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="37570bd2-5782-4c3a-ab4b-eea217911b8f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="fe6cabab-5308-4587-850e-72a20d80267f">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="ce34ff2b-a7f4-4cbb-9159-49788720a0c0">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>38B193C58D5CAE6E87068E895C8479E1</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS+l+_s45plsEuctAHK4Rp</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="856ab24e-d8d5-4535-8475-149b8673e97e">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="2481147d-40fa-446d-b646-48d257494e09">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="5e9bd8d7-4589-4da9-be5b-c1986a740bc9">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="4ab8a2bb-345a-4adb-9e3b-a1443c7474fe">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="10118487-4587-46ab-a507-5b3705131280">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L


                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="8be91bfb-df97-4a21-a3df-e74ffbb18dea">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f77c0df0-30ec-458f-8960-13b9bdfd9efa">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="c88db932-1e2e-4f08-b646-909233cec4dd"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="b5e511f6-94de-46e5-b917-5f0e12d0187e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="77259a52-aeac-43e3-b52c-43f59e48634a">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>09327BA17125CDEAC144A3A3FDC07A69</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSQCFhp8zy+ti0JlU+NH+L</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="50c4d882-b2a1-4794-beb7-d82d6a53d004">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="a8c6a1a0-b794-4d6a-bae1-2b158c0e67e0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="b304c218-0e67-4851-944c-5b8823b47eec">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f07495a9-66f6-47a8-918e-c89e5cd770fa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="63a64a91-ae40-4b91-a6f8-073edd43102a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="17491b91-a3f8-46b3-9dae-ce2953fb8b14">
            <con:settings/>
            <con:testStep type="request" name="login" id="fea9c1fd-36bc-4e9c-ac49-204e603e148f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="f50dc3d5-8319-41ad-bda9-d86de485b8b6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="bd20c17c-6aad-4ee5-86eb-f72180060f48">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>D78DF1B1ED8B9186DBEB73804CFAEAE6</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSYw9ybxhR3cvUBAc9DEFY</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="059e9462-5d85-49b2-a3ed-556322b7a9dd">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="ce42b4a4-71e9-4e20-ba2b-57657ff74d0f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="14f2e663-1aa4-4c88-9967-c0daa743ba3e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="91cde530-658b-43e8-8fdf-f1a3b34eefb0">
            <con:settings/>
            <con:testStep type="request" name="login" id="2aeaa019-a231-4079-a68b-02669933049c">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="2761f7fd-e777-4a0c-b562-f59c13c24f42">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="7675018c-c9c7-4572-a8da-0e65827d37c7">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>B448628391B4EA7648400D1BCF375D1E</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSlO42vdyZ5XU3zxIbNUH3</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="e8b0e513-e508-49d8-9d89-d733da71f598">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="7bb0fecb-18c1-4914-978c-c5f706da2515">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="ba91743f-21f8-4025-a7f3-ae743fc0cb14">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties>
            <con:property>
                <con:name>KOD_TOTP</con:name>
                <con:value>952339</con:value>
            </con:property>
            <con:property>
                <con:name>KOD_TOTP_TIMESTAMP</con:name>
                <con:value>1758267041</con:value>
            </con:property>
        </con:properties>
    </con:testSuite>
    <con:testSuite name="TestSuite OW15 LEK" id="e5a09747-697e-4c3c-92a4-c52c84c50e66">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="68458c2a-b596-42d0-90a5-c00d97352f4b">
            <con:settings/>
            <con:testStep type="request" name="login" id="48812625-5569-470b-b59e-320bf63d39c2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="f57c6bff-4684-4de1-869f-098ecaeeba9e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="de151c22-11f0-42f3-b93f-408bf0e326eb">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>A527542E330F7378D9A122B14CFC8828</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSu2iBhS20Q125whOQoxAg</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="79769b10-12fb-4deb-aa6d-26b36076235a">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="de8eba39-8316-490d-bafa-d29c5df0481d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="ef2f3cab-893a-464f-8adc-8900d853afc5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="9fd46438-3364-48e6-977b-638bd98d6268">
            <con:settings/>
            <con:testStep type="request" name="login" id="675e3f37-3ec3-4394-9b51-00971f915380">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="a8ecb849-98c6-46e1-ba37-4eeb5d78e95c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="d13ea892-44f6-4e08-b6fa-d39c945d777b"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="674cdb0e-6720-47fb-8ad1-00202ea2a81e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="de70afb0-0b4d-4258-b9a3-e6f466d27e27">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>6207357815AF395E40E00DC1D4D44862</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BShmrHrnNLQRBVWCm7Y2sB</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="0601ea30-d452-4609-bbc3-80344ff6871a">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="dd099520-4270-412d-97c1-180127c059b7">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="96c31c75-1e2e-4d1d-9141-cf2124a3b876">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f73c7c0f-34b5-4358-b713-027732390819"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="211c0bf6-431d-43ba-93ac-71a3c9b2a41d">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="a95c4bcc-1bac-4a4c-9136-0047f671f69e">
            <con:settings/>
            <con:testStep type="request" name="login" id="59630bd1-cacd-4413-9324-99dbf22a967f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="2e84aabf-df31-4998-ba9b-5550507dbbba">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ae874c6a-d403-4714-99bd-22f3819082d0"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="a87788ec-572a-4671-ab47-ec9802cf25d5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="ba9311e5-8a1d-4108-959e-6720c021860e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>F09B6DB47377B28F7DA31DAB2659CCFC</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS_rwdoDASJFICLIZA8Og5</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="dc7f4407-a894-49b1-8c35-9beac0634392">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="46de96fe-fe31-4928-b2fb-1d77fe646ce8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="8b4befa5-964a-430d-a008-69742008dea0">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="31af39a3-da0a-4f05-9f99-a9bb54289829"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="af9c7de3-da68-45ad-9eeb-0cd2530395f4">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="9f1f9279-4933-428d-a173-487245b07946">
            <con:settings/>
            <con:testStep type="request" name="login" id="4c921fb5-572d-45c4-abe7-0fe4a3f5607b">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="501c6462-14e5-4a9f-bee7-6e229bb33bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="3d658934-2f4e-4b0f-9234-c6a51612ca50"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="58517cfb-660d-48d6-8c3b-1da10cf86d4d">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="cf093109-43e6-4184-9a80-e9d6858f49ab">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>D68B6FCE012C38BFABC9E80D37EBDDDF</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSuEaO6ZkKxyhG0A+__R2w</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="475be05c-4286-4204-98e5-a2ded06ab5d7">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="77fe2dd7-e8c0-4a57-8c0c-5c932682db50">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="9b7052fb-9e5a-4cf8-a649-1870ce877f40">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ed6df1ea-4907-4902-8cf2-5d89ded8f7a9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="336cdb32-c025-44a9-a99d-2efad6a7e582">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="2d2f39be-cbe9-45bb-a0b8-0a298250aadc">
            <con:settings/>
            <con:testStep type="request" name="login" id="56993b6b-653e-4c7b-8f0c-1f3dda6ef752">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="4bdb5b1c-46ca-4b85-aeb7-70dbe2476f86">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="27ff0fb9-0708-4045-982d-d4c03c168df7"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="73d4014c-7c4f-411f-8b15-ab80d26fecc4">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="fc8291e6-60ca-4f55-95f5-129c4fd3f635">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>9B6D0092EE3963B475D4DA8F6BE6C806</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSmppotJbqacKYVS1gmHnW</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="58388ae4-3555-4497-801e-e79dfeb3dbd6">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="a33144f4-45cc-4722-8f7d-33b27a2d52b4">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="db549b9f-d8ae-4280-8230-def08839ac61">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f5450b83-fdfc-4b2a-9f1c-0d1113fa66c9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="59ced7d1-fee7-4c48-9fa3-f2f6e646edfa">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="e33d5a76-6dff-4627-a775-f96f4f36be17">
            <con:settings/>
            <con:testStep type="request" name="login" id="55c87b2e-8108-49f8-9bbf-2c6687672ecb">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="8f1bddff-5f51-48c3-a8df-7af5c1b846dd">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="252667b4-01d9-4cb2-9797-1a0f053e129e">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>5DFC8B53AC87DB306666B2492E77A144</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSRYvi5cqmlOlaTo0rD1th</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="c243e0b5-9302-45c3-a4e5-7707910845aa">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="5e738c1b-410e-453e-b66b-473ff5f16de8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="98a8210e-52ba-4c6b-b817-ab3566ffd04c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="20d38450-f056-4ae4-887a-b37de9649d80">
            <con:settings/>
            <con:testStep type="request" name="login" id="f039687a-7bb5-4179-abce-90e5e98ed25e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="55d5c9f7-13b5-452b-9aa9-d59c63452be1">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="151f99cc-ae77-4f62-b217-2e0b7e78f422">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>549438CE9D0C1719274A0D91CEF0150F</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSlMmJ8rP7CdLKckcdLiYJ</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="7a2eb8a8-398c-4dd7-a976-e796898912f2">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="d85eafef-328e-4e0b-9e07-289dad5a8650">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="66a7f332-a238-4b9f-a185-5818d1cb96f8">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="4b1b555e-32de-4c16-92d2-f00f2fb77565">
            <con:settings/>
            <con:testStep type="request" name="login" id="248567c8-64db-4189-b04c-3fc591457089">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="e943038d-d7b9-4a61-9e44-cd281430f6ac">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="df5532d7-7c99-439b-85e6-abed42437511">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>619287A6962E6A1DDF2293FC4DF3B80A</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSMgt3srQaddpjD8iqGbuU</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="ea50b148-95bf-4a0e-bb12-2f485c9760c1">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="7371c1fd-4bfd-4d06-bbb3-c9dc123aae39">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="80bab36b-8612-46e0-bd10-eec27668f5d7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="cab56940-b5c8-44e2-99c8-75d22cde7344">
            <con:settings/>
            <con:testStep type="request" name="login" id="207def56-d130-4566-bf3d-2298829473dd">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="a32f8531-df00-42eb-ad0e-b1a67d5461e8">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="facac36e-80c6-4e01-92f8-5613eda3b0bd">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>9742FED578BDF662756D5D39E0BB50BE</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSnEGaCmcK5NjTX_7pkM21</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="ea120e0a-2208-458b-9cc4-97617b3df93a">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="ccee0622-135d-47c1-9780-e4e840c65230">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="09b583ac-ab75-4d46-9038-fd20a8dba76b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="59066ce8-e2d5-403a-9948-14e546b9fe35">
            <con:settings/>
            <con:testStep type="request" name="login" id="e0c0cc74-e03c-4783-8be1-7fa4f1f08f9f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="97bd0e6a-8806-42fd-bf58-d3ee098adf18">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="8abd664e-dc53-43ec-b765-f9924cc2002b">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>2D55A2E3A5511773B2F32A6966A849BC</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSeNjaKyjBn7QbclAbnSPT</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="26174369-b26a-43b5-b837-938ad0824e56">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="c9c9585c-f83d-4b07-a3e0-2259e2e57ceb">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="c3822a29-e157-4761-82f0-b4c67d6c6a1c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="TestSuite OW15 LEK MFA" id="01b315d0-5ea1-4e66-a5df-65242d55b614">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase id="793a6911-77d4-46c0-8f32-ff8cef489bec" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Get MFA"
                      searchProperties="true">
            <con:settings/>
            <con:testStep type="groovy" name="GetMFACode" id="5dee411a-2546-46ac-a218-f4e95961b63e">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem)"
                      searchProperties="true" id="108f53a3-0c78-439c-8367-d084d1d254b3">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="dc145d16-d3bd-4238-b9d4-cdf331254ca2">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="61ca9fb0-ee9b-428c-82ff-85755fb4090f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="634c73dc-b910-4379-8e48-85e90400a80f">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="0ad37926-2e51-4197-bcef-1bd679ef48f7">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>BACCB92E890DA8A67689E5DECB4FBD24</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSU9DUfuIXw3LsZ9uP7_eq</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="5563c16b-5940-4805-ac91-efe9f0e8422f">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="7dc046e0-fdf2-485d-af6b-757d217d4eb0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>79060804378</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="fae582a4-3db5-40db-b35a-376768baf67a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z uprawnieniem DN)"
                      searchProperties="true" id="015c59e1-256d-4036-b164-80a5b493c121">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="085339f7-a2fa-4d58-b94e-d036e120193e">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="713a3243-7e97-433e-8194-8c4c665529f2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="a8ecb849-98c6-46e1-ba37-4eeb5d78e95c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="d13ea892-44f6-4e08-b6fa-d39c945d777b"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="8223088a-0c97-448e-98ed-a6e03d06d18d">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="bc668b6f-108b-4daa-b551-63134aa132ed">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>7A7BB714F8578EE8055A059363EE4C11</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSGYlS5gF75++5w1uPMMD0</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="e82b0b99-ca5d-43b3-a47a-e02e9fb4fa8c">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="0a7ffea1-d03c-457e-a650-1178a7fe5b3d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="96c31c75-1e2e-4d1d-9141-cf2124a3b876">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>19323197971</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f73c7c0f-34b5-4358-b713-027732390819"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="18ac8fae-b5a1-4b1f-9dad-4cf1e03755e6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba bez uprawnień)"
                      searchProperties="true" id="9f583b44-8f1c-4a73-b067-318a7802d87c">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="407fb087-b459-4cf1-8e63-64b389bb643a">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="5a52ff8c-a721-4932-acc4-9e626917c4ee">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="2e84aabf-df31-4998-ba9b-5550507dbbba">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ae874c6a-d403-4714-99bd-22f3819082d0"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="a521c065-9ceb-49b9-b6b3-7500521756ba">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="ae7c0868-8105-4f98-98e1-b3b6d1376d8c">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>502560589F18088CA64FB88432B6C88A</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSQR26HIxZ771bFdKs+spo</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="73e1d327-a51e-4615-b0e8-726070ebb165">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="f8460aff-79c9-454b-9be3-a581232ee165">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="8b4befa5-964a-430d-a008-69742008dea0">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>55021562501</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="31af39a3-da0a-4f05-9f99-a9bb54289829"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="16087dd4-413d-4ddd-9d69-9dc7290ca746">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (osoba z anulowanym nr PESEL)"
                      searchProperties="true" id="b5ef9e3e-ecbf-4679-a51f-714e07fccbfc">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="c3e0f60d-837a-4c30-9b91-e1f6a2d16a54">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="f8cc271b-3a05-450a-810c-9fead4cd7bfd">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="501c6462-14e5-4a9f-bee7-6e229bb33bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="3d658934-2f4e-4b0f-9234-c6a51612ca50"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="7087e393-0221-41fa-9e41-3f849d580a4b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="799fe720-a2b8-4c60-a9a2-b304590051b1">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>20D9AFDA2FE9E50AF6E9DEAFE26EAD2C</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSB4dNyiHBKt0Yx9sjJ36A</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="cbaaebaf-a764-4c18-8189-3980be3ad288">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="568b4116-7f66-4fbe-a7ce-cbf264634287">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="9b7052fb-9e5a-4cf8-a649-1870ce877f40">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00060958187</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ed6df1ea-4907-4902-8cf2-5d89ded8f7a9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="c7d9778a-913e-4776-970e-cbe1c1448d77">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (brak osoby w CWU)"
                      searchProperties="true" id="4569d00d-21cf-4fbe-927e-256a2cae6e29">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="1402c886-2448-406c-a007-03408cdfd1a1">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="f3438775-69a5-46b5-ab9e-72e873cfcb3d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="4bdb5b1c-46ca-4b85-aeb7-70dbe2476f86">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="27ff0fb9-0708-4045-982d-d4c03c168df7"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="5b5584b7-8db5-42be-a279-950ba4718323">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="2d045afa-ef9c-4571-b767-ea7ab25a9f6c">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>13626215897FE6CC3B81BF711B3CBFF2</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS0qLhlh86a+vgmisyUkwy</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="0aafbc77-def7-475e-a2d9-a4d576e24e40">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="25501ff9-3a91-4542-bab9-efcc21720a70">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="db549b9f-d8ae-4280-8230-def08839ac61">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>01010153201</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f5450b83-fdfc-4b2a-9f1c-0d1113fa66c9"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="469a342c-12ac-46d0-a99c-489505351de6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022)" searchProperties="true"
                      id="125feb17-a529-44ea-b137-e1562d24f0ad">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="e9183c5c-406a-4684-bf56-33c47cdefa7e">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="6806d1cf-8056-4575-a189-b2534494fbe3">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="2557ddf1-cb3f-45cf-9931-fbe444051e5c">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="1a0eafbc-40fb-4811-8fae-bec9ff0e89d9">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>A1CBE38C1B84E6F453F161C8913CF5BB</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSFWrlWuixsXd0DBncJ17k</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="600e45bd-ea8b-4c17-bce7-c3bf2008e2d4">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="453b6856-477a-4d20-b6a6-ab71cdab83d0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>03070665355</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="0148e973-7795-448d-8dd2-64044294dd49">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DZIECKO" searchProperties="true"
                      id="2c5415e5-c836-41cf-92d7-a2adb2ad9103">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="08229cfe-e0bb-4a54-a678-649af2af8518">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="2f812e5b-074e-48bf-b98a-5bf609b84031">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="a018af3d-e4de-434e-97f0-2396443b8d0b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="42d53d94-04d7-4bbc-ab89-7e76fd0680ce">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>A8BD0DD6A7F0C78E9C0FD29A7EEAA4BE</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSKEMzDB5JG0B1WutjAb4n</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="0b57a214-8775-4701-a2e9-89b79c49b023">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="f26b40b1-1b7c-4e4c-ad21-b13ca241282f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>20220178293</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="84d8892d-5f56-491c-81e7-97f17552d40b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0"
                      name="TestCase (osoba z uprawnieniem na podstawie ustawy z dnia 12.03.2022) - UKR-DOROSLY" searchProperties="true"
                      id="3c5db3d7-ad2c-4ebf-a273-61a844fbb44e">
            <con:settings/>
            <con:testStep type="groovy" name="Get MFA" id="19c965e7-47cc-4eaa-a029-e3ffb43461f6">
                <con:settings/>
                <con:config>
                    <script>import com.eviware.soapui.support.UISupport

                        def suite = testRunner.testCase.testSuite

                        long now = System.currentTimeMillis() / 1000L

                        def kod = suite.getPropertyValue('KOD_TOTP')
                        def timestampStr = suite.getPropertyValue('KOD_TOTP_TIMESTAMP')
                        long prevTime = timestampStr?.isLong() ? timestampStr.toLong() : 0L

                        if (!kod || now - prevTime >= 30) {
                        kod = UISupport.prompt("Podaj kod TOTP z aplikacji:", "Nowy kod (wygasł poprzedni lub nie było)")
                        if (kod == null) throw new RuntimeException("Anulowano wprowadzenie TOTP!")
                        suite.setPropertyValue('KOD_TOTP', kod)
                        suite.setPropertyValue('KOD_TOTP_TIMESTAMP', now.toString())
                        log.info "Nowy kod TOTP: $kod (zaktualizowany w ${now})"
                        } else {
                        log.info "Wykorzystano stary kod TOTP: $kod (ustawiony o ${prevTime})"
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="login" id="cac9afdf-4efa-4ccd-b33d-6f4e6ec1737c">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="b08fad48-399d-4a1a-89c0-fb2d71d6c056">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>15</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>LEKARZ1_MFA</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
               			<auth:name>mfaTotp</auth:name>
               			<auth:value>
                  				<auth:stringValue>${#TestSuite#KOD_TOTP}</auth:stringValue>
               			</auth:value>
            			</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="a4dfa369-acce-47fc-9544-541404e2dd76"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="2c0f22fe-0211-44ce-820e-6b84c849dc7e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="2ce8e12e-ca93-445f-859e-b65b82bb4dbd">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>71B28CDF0C0DCA7EC46080C7FD4D2562</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSOyvVXDqGrw5IPxo8vN0v</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="f87040db-b065-4a3a-95c2-e3441e7ca983">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="398c1d83-33b4-428c-be5d-d8804029dac1">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="fddebf97-a547-46ac-836f-6c088633f7ac">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>00262656829</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ede07337-9df4-43bf-a80b-dd55999d7586"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="f83a347a-8d70-48e6-ae26-3a3ef5264f21">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada dzienna)"
                      searchProperties="true" id="b7a23572-24cb-433a-9703-16a115bad60a">
            <con:settings/>
            <con:testStep type="request" name="login" id="2fb6bf21-7fea-44c4-a70d-16a432a17365">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="0364fe31-1b28-4b62-a7b9-26f0af631d6a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="9a5fd1c3-0ff3-48ea-8251-19bd187a8f2c">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>42A6CEBB79D0EDFD1291DD42FE80DA05</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSMbMGSh1G3K86z63ZKOxB</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="3cf8625d-3871-428a-9a54-f9f4fc6fe750">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="47c2f47a-95c1-414d-a8da-9beeb07b3123">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199945</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="dc3b81a8-5a65-447d-8565-6bc41c44ef72">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-100)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase (blokada administracyjna)"
                      searchProperties="true" id="b5c2279c-dc7a-4956-b4d1-81663ad254ae">
            <con:settings/>
            <con:testStep type="request" name="login" id="76b55640-fa28-4631-b807-3f5de3de7800">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="42f9224b-b183-4147-8dd2-a42e7d025bcd">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="6d3a8209-2699-4e75-9330-83e1144d6828"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="5033d38d-857a-4a8c-bd12-ac061871b315">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="09bb36c8-e63c-4c9c-86ae-81bf55310ded">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>CF35CD5686C8CBB9EF808E4555A4A7BF</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS8KE+rtmOCiFdHl69jY0N</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>
            <con:testStep type="transfer" name="SESSION" id="d086200f-704c-41b1-8420-cff7f2c07682">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="executeService - checkCWU" id="71ce3607-b76a-4785-84f4-56a1b60155b8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>ServiceBrokerSoapBinding</con:interface>
                    <con:operation>executeService</con:operation>
                    <con:request name="executeService - checkCWU" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="823f0ddf-37c0-499e-9063-d5462b87179d">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/ServiceBroker</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:brok="http://xml.kamsoft.pl/ws/broker">
   <soapenv:Header>
      <com:session id="${SessionIDAuthToken#SessionID}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
      <com:authToken id="${SessionIDAuthToken#AuthToken}" xmlns:ns1="http://xml.kamsoft.pl/ws/common"/>
   </soapenv:Header>
   <soapenv:Body>
      <brok:executeService>
         <com:location>
            <com:namespace>nfz.gov.pl/ws/broker/cwu</com:namespace>
            <com:localname>checkCWU</com:localname>
            <com:version>5.0</com:version>
         </com:location>
         <brok:date>2008-09-12T09:37:36.406+01:00</brok:date>
         <brok:payload>
            <brok:textload>
               <ewus:status_cwu_pyt xmlns:ewus="https://ewus.nfz.gov.pl/ws/broker/ewus/status_cwu/v5">
                  <ewus:numer_pesel>50323199952</ewus:numer_pesel>
                  <ewus:system_swiad nazwa="client-eWUŚ" wersja="1.0.0"/>
               </ewus:status_cwu_pyt>
            </brok:textload>
         </brok:payload>
      </brok:executeService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="575fcbb0-83aa-4c4b-adbe-9d987224688c"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/broker/ServiceBroker/executeServiceRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="executeService check" id="0be97b9d-0c33-47ec-90eb-eb3595e75b9a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("executeService - checkCWU")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'executeService - checkCWU'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }

                        assert context.response.contains('&lt;ns1:faultstring>ERR(-105)') : 'Brak żądanego tekstu w odpowiedzi!'
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties>
            <con:property>
                <con:name>KOD_TOTP</con:name>
                <con:value>400833</con:value>
            </con:property>
            <con:property>
                <con:name>KOD_TOTP_TIMESTAMP</con:name>
                <con:value>1758267113</con:value>
            </con:property>
        </con:properties>
    </con:testSuite>
    <con:testSuite name="Change Password OW01 SWD" id="3ccd57e7-4713-4ce5-886b-d06f743f91b6">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password" searchProperties="true"
                      id="37b9edd2-7615-415b-8861-62906c2ea772">
            <con:settings/>
            <con:testStep type="request" name="login" id="10a1228f-e13b-4a77-b88d-0fc592167abb">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="f2f8642a-36f3-479f-b5f4-90b56eaaf63b">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="ca40e296-5fa3-47ef-b86e-2a02b58469aa"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="e1ef6ddf-ed33-43a2-b495-5c9deb0372ea">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="e617e466-9614-4bb4-8919-8ebb80aacbec">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>10434E67B8E2F259CA2F373F6AB968BE</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSjIGJRtfXmThuCrT0p+tG</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>

            <con:testStep type="transfer" name="SESSION" id="31305c07-3ebc-4d87-8451-caf76853c593">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePassword" id="b608158c-264e-4a9e-b141-6b93128130b3">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePassword</con:operation>
                    <con:request name="changePassword" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="33645c35-51d3-4423-8fa6-d44264a7b910">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header>
      <com:authToken id="${SessionIDAuthToken#AuthToken}"/>
      <com:session id="${SessionIDAuthToken#SessionID}"/>
   </soapenv:Header>
   <soapenv:Body>
      <auth:changePassword>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>01</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>SWD</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntSwd</auth:name>
               <auth:value>
                  <auth:stringValue>123456789</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePassword>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="261f5b00-7e06-4fd9-abae-3a9a3f8ecc60"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePassword check" id="b843f8fd-2a0d-4b73-9572-e2bf99476ab0">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePassword")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePassword'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password Log" searchProperties="true"
                      id="e7df6664-488f-4488-8bdf-168ffdceb49d">
            <con:settings/>


            <con:testStep type="request" name="login" id="6c2732b3-dc1a-458e-9568-f4f9c2f2f3a4">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="7a652305-1d43-447f-ac5b-6c44b93e390e">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
			 <auth:login>
				<auth:credentials>
					<auth:item>
						<auth:name>domain</auth:name>
						<auth:value><auth:stringValue>01</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>type</auth:name>
						<auth:value><auth:stringValue>SWD</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>idntSwd</auth:name>
						<auth:value><auth:stringValue>123456789</auth:stringValue></auth:value>
					</auth:item>
					<auth:item>
						<auth:name>login</auth:name>
						<auth:value><auth:stringValue>TEST_EXP</auth:stringValue></auth:value>
					</auth:item>
				</auth:credentials>
		            	<auth:password>qwerty!@#</auth:password>
			</auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="905575fe-c3b4-45b5-80b1-2b61c176582e"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="b1d42b48-35fb-4cbd-8b50-af339347b41b">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePasswordLog" id="97e137b7-aa42-401a-bb44-eb6324030261">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePasswordLog</con:operation>
                    <con:request name="changePasswordLog" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="4668603f-5a48-4aac-8db5-54ebf79b3adb">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:changePasswordLog>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>01</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>SWD</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntSwd</auth:name>
               <auth:value>
                  <auth:stringValue>123456789</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePasswordLog>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="b4de869c-a69c-4384-8e1d-b969e3c62ae4"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordLogRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePasswordLog check" id="4b94f1f7-4a4f-41f1-a585-4b72e56cfdb6">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePasswordLog")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePasswordLog'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="Change Password OW09 LEK" id="7a3410a2-107d-475d-a1b8-81c9f852c2e9">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password" searchProperties="true"
                      id="8a1bdd2f-935a-4dd9-9fdb-ece2539ea8df">
            <con:settings/>
            <con:testStep type="request" name="login" id="7f5ce643-54da-4db8-bcbb-2a11081a1a64">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="dd8f3ce5-49b1-422f-a884-771f40d9a245">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="37e210cb-c5d2-4a04-a580-a0899470f58e"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="2229fbc6-2601-49ee-87fb-6254253e64b5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="26fe62f2-0a30-4260-968b-a6d51cc1fb3b">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>B2A41F3BC198B6232C8377186BC03F02</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSt2uhfn8YzKKL5_XkEqan</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>

            <con:testStep type="transfer" name="SESSION" id="c52fb730-6026-4b03-85f4-94b621893500">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePassword" id="6440561a-7099-43d0-b0dc-5c4eb1042209">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePassword</con:operation>
                    <con:request name="changePassword" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="1eed94df-54b6-493b-a532-3a4e1a84781c">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header>
      <com:authToken id="${SessionIDAuthToken#AuthToken}"/>
      <com:session id="${SessionIDAuthToken#SessionID}"/>
   </soapenv:Header>
   <soapenv:Body>
      <auth:changePassword>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePassword>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="2451af37-a777-4c06-a2cd-fe547c464db1"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePassword check" id="e017a1a7-c7e0-41e8-a1b1-329c96a0aeb2">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePassword")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePassword'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password Log" searchProperties="true"
                      id="c4636219-2b10-4f76-94cb-b6322705cf16">
            <con:settings/>


            <con:testStep type="request" name="login" id="d64099f4-0de8-4ba8-89d4-771a397e13f0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="40306656-66b4-4d25-899d-b3391924fc80">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="50076ea4-4414-42be-99b3-d1bc48486cd0"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="b3c1f1ba-10a2-4566-964e-51b92a565109">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePasswordLog" id="1bc49a17-30c9-4bc2-95b7-807a55d52284">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePasswordLog</con:operation>
                    <con:request name="changePasswordLog" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="bde2511b-e267-4c2b-8cd6-2ec1e3c0d9e4">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:changePasswordLog>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>type</auth:name>
               <auth:value>
                  <auth:stringValue>LEK</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>idntLek</auth:name>
               <auth:value>
                  <auth:stringValue>lekarz09</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePasswordLog>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="013b6762-1a0e-4f6b-a3f0-71cc215c6d7e"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordLogRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePasswordLog check" id="bcd562a6-9e10-43cd-9564-fa3cbfbd462e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePasswordLog")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePasswordLog'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="Change Password OW15 SWD" id="8b976d87-1d32-48af-bd2a-304fa3dacb5c">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password" searchProperties="true"
                      id="21fc1f3b-7ad5-4ba9-bd15-905777975150">
            <con:settings/>
            <con:testStep type="request" name="login" id="82193fd4-c6be-4838-bfce-23f38222997d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="48985767-29bf-4059-8539-792548ae8a3b">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="4e8040c9-3054-4c5f-89a6-2f8bd6b98ff3"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="b66f96f6-c67c-4ded-b090-0b7a38458e4f">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="ab3d93ff-57ae-4f34-b978-39415827d36f">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>EC22FE4249B688DB8304C76D94D6A3F8</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BS+bYIFOsJqjTtmZJfeatb</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>

            <con:testStep type="transfer" name="SESSION" id="56d09cda-fc3a-4c46-8aa6-8abde44f45dc">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePassword" id="6e286ade-032d-4f71-b0e2-d9ddcf53d8b6">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePassword</con:operation>
                    <con:request name="changePassword" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="58ade26e-6201-4041-b1cc-297694f0738f">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header>
      <com:authToken id="${SessionIDAuthToken#AuthToken}"/>
      <com:session id="${SessionIDAuthToken#SessionID}"/>
   </soapenv:Header>
   <soapenv:Body>
      <auth:changePassword>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePassword>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="936091cd-6bd7-4255-85ad-c510e3c532bb"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePassword check" id="c5cc40c6-23d5-41cf-be9b-0a7a06c45e0e">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePassword")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePassword'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password Log" searchProperties="true"
                      id="901a76fb-4cf4-4d32-ba7e-330a49185e15">
            <con:settings/>


            <con:testStep type="request" name="login" id="8a8f04a5-83c4-41e4-abcd-a078939ca7df">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="915ae502-af17-4425-b32e-8b39f1731850">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="53345819-7eb7-4530-950d-ab7afc8513fe"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="fdf91eb6-2af8-4482-9ab0-76d0848917d7">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePasswordLog" id="b1f3404a-0912-4047-8785-f8ab06ed2234">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePasswordLog</con:operation>
                    <con:request name="changePasswordLog" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="3fa14d42-5e26-434d-bdb3-368e7bb800e9">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:changePasswordLog>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>TEST1_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePasswordLog>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="f0ca938d-cf0a-45fb-80e4-8037cbce841a"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordLogRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePasswordLog check" id="76265696-e943-4e76-9ced-2853867e3f5f">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePasswordLog")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePasswordLog'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:testSuite name="Change Password OW15 LEK" id="ecb4343f-47e9-45ed-87dd-585f0c0cb475">
        <con:settings/>
        <con:runType>SEQUENTIAL</con:runType>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password" searchProperties="true"
                      id="f53b38d2-b3cb-48ef-bae9-b01ee51eae93">
            <con:settings/>
            <con:testStep type="request" name="login" id="561a2693-9fa8-451b-ab09-2b0972956745">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="076b440f-b0e6-4075-a0fa-3035f57db540">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>LEKARZ1</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="b4847c9b-dd88-44ae-8beb-b9c90b5fa87d"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="ccdba1ba-57b4-4bf5-b131-eea1185dff92">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="properties" name="SessionIDAuthToken" id="949b1c90-b71e-4dc4-adc2-a354d7ff7f50">
                <con:settings/>
                <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:properties>
                        <con:property>
                            <con:name>SessionID</con:name>
                            <con:value>7FB06512DE40712CDDEF418E9AE8F849</con:value>
                        </con:property>
                        <con:property>
                            <con:name>AuthToken</con:name>
                            <con:value>BSxK9E2E1XTC4NrLNgIi49</con:value>
                        </con:property>
                    </con:properties>
                </con:config>
            </con:testStep>

            <con:testStep type="transfer" name="SESSION" id="b4ccbdda-a5b8-4c39-9853-394c0f603314">
                <con:settings/>
                <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferSessionID</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:session/@id
                        </con:sourcePath>
                        <con:targetType>SessionID</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                    <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" ignoreEmpty="false"
                                   useXQuery="false" entitize="false" transferChildNodes="false">
                        <con:name>TransferAuthToken</con:name>
                        <con:sourceType>Response</con:sourceType>
                        <con:sourceStep>login</con:sourceStep>
                        <con:sourcePath>declare namespace ns1="http://xml.kamsoft.pl/ws/common";
                            //ns1:authToken/@id
                        </con:sourcePath>
                        <con:targetType>AuthToken</con:targetType>
                        <con:targetStep>SessionIDAuthToken</con:targetStep>
                        <con:targetPath/>
                        <con:upgraded>true</con:upgraded>
                    </con:transfers>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePassword" id="40090ea2-6cc6-47c3-aa6a-7ab4aa32d35f">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePassword</con:operation>
                    <con:request name="changePassword" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="49049a3e-e860-480d-b85a-5210f5e9e05a">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://xml.kamsoft.pl/ws/common" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header>
      <com:authToken id="${SessionIDAuthToken#AuthToken}"/>
      <com:session id="${SessionIDAuthToken#SessionID}"/>
   </soapenv:Header>
   <soapenv:Body>
      <auth:changePassword>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>LEKARZ1</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePassword>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="d1836371-2e36-444c-81f8-74930dee685a"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePassword check" id="b714c82f-3e05-414c-b84a-df454f118984">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePassword")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePassword'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Change Password Log" searchProperties="true"
                      id="7e464a19-eb06-4709-bed9-0910d88ed239">
            <con:settings/>


            <con:testStep type="request" name="login" id="f1f04b1f-cd2d-4185-a585-64da34046193">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>login</con:operation>
                    <con:request name="login" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false"
                                 wssPasswordType="" id="41e8216b-271d-43d8-8fbc-052946e58404">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:login>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>LEKARZ1_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:password>qwerty!@#</auth:password>
      </auth:login>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="283c4a81-6b84-468e-a716-63c10a3d35f4"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                            <con:username/>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/loginRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="login check" id="cc4004fc-cf8d-4f39-b248-f3cb66b7ece5">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("login")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'login'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 500) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 500!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:testStep type="request" name="changePasswordLog" id="1533db3d-4bf2-4354-a48d-8f1a91f79f77">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>AuthSoapBinding</con:interface>
                    <con:operation>changePasswordLog</con:operation>
                    <con:request name="changePasswordLog" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false"
                                 useWsReliableMessaging="false" wssPasswordType="" id="34a19f2b-99f9-469f-a18e-dc5ae45cdeff">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>https://ewus.nfz.gov.pl/ws-broker-server-ewus-auth-test/services/Auth</con:endpoint>
                        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:auth="http://xml.kamsoft.pl/ws/kaas/login_types">
   <soapenv:Header/>
   <soapenv:Body>
      <auth:changePasswordLog>
         <auth:credentials>
            <auth:item>
               <auth:name>domain</auth:name>
               <auth:value>
                  <auth:stringValue>15</auth:stringValue>
               </auth:value>
            </auth:item>
            <auth:item>
               <auth:name>login</auth:name>
               <auth:value>
                  <auth:stringValue>LEKARZ1_EXP</auth:stringValue>
               </auth:value>
            </auth:item>
         </auth:credentials>
         <auth:oldPassword>qwerty!@#</auth:oldPassword>
         <auth:newPassword>asdfgh#@!</auth:newPassword>
         <auth:newPasswordRepeat>asdfgh#@!</auth:newPasswordRepeat>
      </auth:changePasswordLog>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" name="SOAP Response" id="3a5498eb-0009-460d-ad06-e872b2fe916a"/>
                        <con:credentials>
                            <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
                            <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
                            <con:authType>Global HTTP Settings</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://xml.kamsoft.pl/ws/auth/Auth/changePasswordLogRequest"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep>
            <con:testStep type="groovy" name="changePasswordLog check" id="639532d6-32f1-4cbe-b476-dc3eccbd4c1a">
                <con:settings/>
                <con:config>
                    <script>// Pobierz bezpośrednio obiekt odpowiedzi z kroku "login"
                        def testStep = testRunner.testCase.getTestStepByName("changePasswordLog")
                        def response = testStep.testRequest.response
                        if (!response) {
                        throw new AssertionError("Brak odpowiedzi na kroku 'changePasswordLog'!")
                        }
                        def status = response.getStatusCode()

                        if (status != 200) {
                        throw new AssertionError("Kod HTTP jest: ${status}, oczekiwano 200!")
                        }
                    </script>
                </con:config>
            </con:testStep>
            <con:properties/>
        </con:testCase>
        <con:properties/>
    </con:testSuite>
    <con:properties/>
    <con:wssContainer/>
    <con:oAuth2ProfileContainer/>
    <con:oAuth1ProfileContainer/>
    <con:sensitiveInformation/>
</con:soapui-project>
